{"repository_name":"armature","body":"# Armature\n\nArmature is an HTTP routing framework for Crystal.\n\n## Installation\n\n1. Add the dependency to your `shard.yml`:\n\n   ```yaml\n   dependencies:\n     armature:\n       github: jgaskins/armature\n   ```\n\n2. Run `shards install`\n\n## Usage\n\nArmature has 2 primary components:\n\n- `Armature::Route`\n  - Provides a routing graph by allowing a top-level application to delegate to various child routes based on path segments\n  - Provides an [ECR](https://crystal-lang.org/api/1.0.0/ECR.html) rendering macro to render view templates at compile time. View templates are under the `views/` directory in the application root.\n  - Provides a missed-match handler (`r.miss`) so you can provide custom 404 handling in a way that's simple and discoverable\n- `Armature::Session`\n  - If you're using cookie-based authentication, you can use Armature sessions to persist session data between requests\n  - Currently the only supported session adapter is `Armature::Session::RedisStore`. The value stored in the cookie is the session id and the data stored in Redis will be the session data serialized into a JSON string.\n\n```crystal\nrequire \"armature\"\nrequire \"armature/redis_session\"\nrequire \"redis\"\n\nclass App\n  include HTTP::Handler\n  include Armature::Route\n\n  def call(context)\n    route context do |r, response, session|\n      # The `session` can be treated as a key/value object. All JSON-friendly\n      # types can be stored and retrieved. The stored session data is saved as\n      # JSON and parsed into a `JSON::Any`.\n      if current_user_id = session[\"user_id\"]?.try(&.as_i?)\n        current_user = UserQuery.new.find_by_id(current_user_id)\n      end\n\n      # `render` macro provided by `Armature::Route` renders the given template\n      # inside the `views/` directory to the `response` object. This example\n      # renders `views/app_header.ecr`.\n      #\n      # Note: You can render as many templates as you need, allowing for nesting\n      # your UI via nested routes.\n      render \"app_header\"\n      \n      # Root path (all HTTP verbs)\n      r.root do\n        # Execute the given block only for GET requests\n        r.get { render \"homepage\" }\n\n        # Execute the given block only for POST requests\n        r.post do\n          # ...\n        end\n      end\n\n      # Delegate certain paths to other `Armature::Route`s with `on`\n      r.on \"products\" { Products.new.call(context) }\n\n      # Allow for authenticated-only routes\n      if current_user\n        r.on \"notifications\" { Notifications.new(current_user).call(context) }\n        r.on \"cart\" { Cart.new(current_user).call(context) }\n      end\n\n      # Execute a block if an endpoint has not been reached yet.\n      r.miss do\n        response.status = :not_found\n        render \"not_found\"\n      end\n\n      # Rendering the footer below main app content\n      render \"app_footer\"\n    end\n  end\nend\n\nhttp = HTTP::Server.new([\n  Armature::Session::RedisStore.new(\n    # the HTTP cookie name to store the session id in\n    key: \"app_session\",\n    # a client for the Redis instance to store session data in\n    redis: Redis::Client.from_env(\"REDIS_URL\"),\n  ),\n  App.new,\n])\nhttp.listen 8080\n```\n\nOther useful components are:\n\n- `Armature::Form::Helper`\n- `Armature::Cache`\n- `Armature::Component`\n\n## Contributing\n\n1. Fork it (<https://github.com/jgaskins/armature/fork>)\n2. Create your feature branch (`git checkout -b my-new-feature`)\n3. Commit your changes (`git commit -am 'Add some feature'`)\n4. Push to the branch (`git push origin my-new-feature`)\n5. Create a new Pull Request\n\n## Contributors\n\n- [Jamie Gaskins](https://github.com/jgaskins) - creator and maintainer\n","program":{"html_id":"armature/toplevel","path":"toplevel.html","kind":"module","full_name":"Top Level Namespace","name":"Top Level Namespace","abstract":false,"locations":[],"repository_name":"armature","program":true,"enum":false,"alias":false,"const":false,"types":[{"html_id":"armature/Armature","path":"Armature.html","kind":"module","full_name":"Armature","name":"Armature","abstract":false,"locations":[{"filename":"src/armature.cr","line_number":6,"url":"https://github.com/jgaskins/armature/blob/v0.4.3/src/armature.cr#L6"},{"filename":"src/cache.cr","line_number":4,"url":"https://github.com/jgaskins/armature/blob/v0.4.3/src/cache.cr#L4"},{"filename":"src/component.cr","line_number":3,"url":"https://github.com/jgaskins/armature/blob/v0.4.3/src/component.cr#L3"},{"filename":"src/form.cr","line_number":3,"url":"https://github.com/jgaskins/armature/blob/v0.4.3/src/form.cr#L3"},{"filename":"src/redis_session.cr","line_number":8,"url":"https://github.com/jgaskins/armature/blob/v0.4.3/src/redis_session.cr#L8"},{"filename":"src/route.cr","line_number":7,"url":"https://github.com/jgaskins/armature/blob/v0.4.3/src/route.cr#L7"},{"filename":"src/session.cr","line_number":3,"url":"https://github.com/jgaskins/armature/blob/v0.4.3/src/session.cr#L3"},{"filename":"src/template.cr","line_number":8,"url":"https://github.com/jgaskins/armature/blob/v0.4.3/src/template.cr#L8"},{"filename":"src/version.cr","line_number":1,"url":"https://github.com/jgaskins/armature/blob/v0.4.3/src/version.cr#L1"}],"repository_name":"armature","program":false,"enum":false,"alias":false,"const":false,"constants":[{"id":"VERSION","name":"VERSION","value":"\"0.4.3\""}],"class_methods":[{"html_id":"cache:Cache::CacheStore-class-method","name":"cache","abstract":false,"location":{"filename":"src/cache.cr","line_number":5,"url":"https://github.com/jgaskins/armature/blob/v0.4.3/src/cache.cr#L5"},"def":{"name":"cache","return_type":"Cache::CacheStore","visibility":"Public","body":"if (__temp_183 = @@cache).nil?\n  ::raise(::NilAssertionError.new(\"Armature.cache cannot be nil\"))\nelse\n  __temp_183\nend"},"external_var":false},{"html_id":"cache=(cache:Cache::CacheStore)-class-method","name":"cache=","abstract":false,"args":[{"name":"cache","external_name":"cache","restriction":"Cache::CacheStore"}],"args_string":"(cache : Cache::CacheStore)","args_html":"(cache : <a href=\"Armature/Cache/CacheStore.html\">Cache::CacheStore</a>)","location":{"filename":"src/cache.cr","line_number":5,"url":"https://github.com/jgaskins/armature/blob/v0.4.3/src/cache.cr#L5"},"def":{"name":"cache=","args":[{"name":"cache","external_name":"cache","restriction":"Cache::CacheStore"}],"visibility":"Public","body":"@@cache = cache"},"external_var":false},{"html_id":"cache?:Cache::CacheStore|Nil-class-method","name":"cache?","abstract":false,"location":{"filename":"src/cache.cr","line_number":5,"url":"https://github.com/jgaskins/armature/blob/v0.4.3/src/cache.cr#L5"},"def":{"name":"cache?","return_type":"Cache::CacheStore | ::Nil","visibility":"Public","body":"@@cache"},"external_var":false}],"types":[{"html_id":"armature/Armature/BlankSession","path":"Armature/BlankSession.html","kind":"class","full_name":"Armature::BlankSession","name":"BlankSession","abstract":false,"superclass":{"html_id":"armature/Armature/Session","kind":"class","full_name":"Armature::Session","name":"Session"},"ancestors":[{"html_id":"armature/Armature/Session","kind":"class","full_name":"Armature::Session","name":"Session"},{"html_id":"armature/Reference","kind":"class","full_name":"Reference","name":"Reference"},{"html_id":"armature/Object","kind":"class","full_name":"Object","name":"Object"}],"locations":[{"filename":"src/session.cr","line_number":24,"url":"https://github.com/jgaskins/armature/blob/v0.4.3/src/session.cr#L24"}],"repository_name":"armature","program":false,"enum":false,"alias":false,"const":false,"namespace":{"html_id":"armature/Armature","kind":"module","full_name":"Armature","name":"Armature"},"constructors":[{"html_id":"new(store,cookies)-class-method","name":"new","abstract":false,"args":[{"name":"store","external_name":"store","restriction":""},{"name":"cookies","external_name":"cookies","restriction":""}],"args_string":"(store, cookies)","args_html":"(store, cookies)","location":{"filename":"src/session.cr","line_number":25,"url":"https://github.com/jgaskins/armature/blob/v0.4.3/src/session.cr#L25"},"def":{"name":"new","args":[{"name":"store","external_name":"store","restriction":""},{"name":"cookies","external_name":"cookies","restriction":""}],"visibility":"Public","body":"_ = allocate\n_.initialize(store, cookies)\nif _.responds_to?(:finalize)\n  ::GC.add_finalizer(_)\nend\n_\n"},"external_var":false}],"instance_methods":[{"html_id":"[](key)-instance-method","name":"[]","abstract":false,"args":[{"name":"key","external_name":"key","restriction":""}],"args_string":"(key)","args_html":"(key)","location":{"filename":"src/session.cr","line_number":28,"url":"https://github.com/jgaskins/armature/blob/v0.4.3/src/session.cr#L28"},"def":{"name":"[]","args":[{"name":"key","external_name":"key","restriction":""}],"visibility":"Public","body":""},"external_var":false},{"html_id":"[]=(key,value)-instance-method","name":"[]=","abstract":false,"args":[{"name":"key","external_name":"key","restriction":""},{"name":"value","external_name":"value","restriction":""}],"args_string":"(key, value)","args_html":"(key, value)","location":{"filename":"src/session.cr","line_number":31,"url":"https://github.com/jgaskins/armature/blob/v0.4.3/src/session.cr#L31"},"def":{"name":"[]=","args":[{"name":"key","external_name":"key","restriction":""},{"name":"value","external_name":"value","restriction":""}],"visibility":"Public","body":""},"external_var":false},{"html_id":"[]?(key)-instance-method","name":"[]?","abstract":false,"args":[{"name":"key","external_name":"key","restriction":""}],"args_string":"(key)","args_html":"(key)","location":{"filename":"src/session.cr","line_number":34,"url":"https://github.com/jgaskins/armature/blob/v0.4.3/src/session.cr#L34"},"def":{"name":"[]?","args":[{"name":"key","external_name":"key","restriction":""}],"visibility":"Public","body":""},"external_var":false},{"html_id":"delete(key)-instance-method","name":"delete","abstract":false,"args":[{"name":"key","external_name":"key","restriction":""}],"args_string":"(key)","args_html":"(key)","location":{"filename":"src/session.cr","line_number":37,"url":"https://github.com/jgaskins/armature/blob/v0.4.3/src/session.cr#L37"},"def":{"name":"delete","args":[{"name":"key","external_name":"key","restriction":""}],"visibility":"Public","body":""},"external_var":false}],"types":[{"html_id":"armature/Armature/BlankSession/Store","path":"Armature/BlankSession/Store.html","kind":"class","full_name":"Armature::BlankSession::Store","name":"Store","abstract":false,"superclass":{"html_id":"armature/Armature/Session/Store","kind":"class","full_name":"Armature::Session::Store","name":"Store"},"ancestors":[{"html_id":"armature/Armature/Session/Store","kind":"class","full_name":"Armature::Session::Store","name":"Store"},{"html_id":"armature/HTTP/Handler","kind":"module","full_name":"HTTP::Handler","name":"Handler"},{"html_id":"armature/Reference","kind":"class","full_name":"Reference","name":"Reference"},{"html_id":"armature/Object","kind":"class","full_name":"Object","name":"Object"}],"locations":[{"filename":"src/session.cr","line_number":40,"url":"https://github.com/jgaskins/armature/blob/v0.4.3/src/session.cr#L40"}],"repository_name":"armature","program":false,"enum":false,"alias":false,"const":false,"namespace":{"html_id":"armature/Armature/BlankSession","kind":"class","full_name":"Armature::BlankSession","name":"BlankSession"},"instance_methods":[{"html_id":"call(context)-instance-method","name":"call","abstract":false,"args":[{"name":"context","external_name":"context","restriction":""}],"args_string":"(context)","args_html":"(context)","location":{"filename":"src/session.cr","line_number":41,"url":"https://github.com/jgaskins/armature/blob/v0.4.3/src/session.cr#L41"},"def":{"name":"call","args":[{"name":"context","external_name":"context","restriction":""}],"visibility":"Public","body":""},"external_var":false},{"html_id":"key-instance-method","name":"key","abstract":false,"location":{"filename":"src/session.cr","line_number":44,"url":"https://github.com/jgaskins/armature/blob/v0.4.3/src/session.cr#L44"},"def":{"name":"key","visibility":"Public","body":"\"\""},"external_var":false}]}]},{"html_id":"armature/Armature/Cache","path":"Armature/Cache.html","kind":"module","full_name":"Armature::Cache","name":"Cache","abstract":false,"locations":[{"filename":"src/cache.cr","line_number":7,"url":"https://github.com/jgaskins/armature/blob/v0.4.3/src/cache.cr#L7"}],"repository_name":"armature","program":false,"enum":false,"alias":false,"const":false,"constants":[{"id":"LOG","name":"LOG","value":"::Log.for(self)"}],"extended_modules":[{"html_id":"armature/Armature/Cache","kind":"module","full_name":"Armature::Cache","name":"Cache"}],"namespace":{"html_id":"armature/Armature","kind":"module","full_name":"Armature","name":"Armature"},"instance_methods":[{"html_id":"cache(key:String,expires_in:Time::Span|Nil,io:IO,&:IO->):Nil-instance-method","name":"cache","abstract":false,"args":[{"name":"key","external_name":"key","restriction":"String"},{"name":"expires_in","external_name":"expires_in","restriction":"Time::Span | ::Nil"},{"name":"io","external_name":"io","restriction":"IO"}],"args_string":"(key : String, expires_in : Time::Span | Nil, io : IO, & : IO -> ) : Nil","args_html":"(key : String, expires_in : Time::Span | Nil, io : IO, & : IO -> ) : Nil","location":{"filename":"src/cache.cr","line_number":40,"url":"https://github.com/jgaskins/armature/blob/v0.4.3/src/cache.cr#L40"},"def":{"name":"cache","args":[{"name":"key","external_name":"key","restriction":"String"},{"name":"expires_in","external_name":"expires_in","restriction":"Time::Span | ::Nil"},{"name":"io","external_name":"io","restriction":"IO"}],"yields":1,"block_arity":1,"block_arg":{"name":"","external_name":"","restriction":"(IO ->)"},"return_type":"Nil","visibility":"Public","body":"if value = ::Armature.cache[key, as: String]?\n  LOG.debug(&.emit(\"hit\", key: key))\n  case value\n  when String\n    io << value\n  when Bytes\n    io.write(value)\n  end\nelse\n  LOG.debug(&.emit(\"miss\", key: key))\n  buffer = IO::Memory.new\n  writer = IO::MultiWriter.new(io, buffer)\n  yield writer.as(IO)\n  LOG.debug(&.emit(\"writing\", key: key, entry_size: buffer.bytesize))\n  ::Armature.cache.write(key, buffer.to_s, expires_in: expires_in)\nend"},"external_var":false},{"html_id":"cache-instance-method","name":"cache","abstract":false,"location":{"filename":"src/cache.cr","line_number":59,"url":"https://github.com/jgaskins/armature/blob/v0.4.3/src/cache.cr#L59"},"def":{"name":"cache","visibility":"Public","body":"::Armature.cache"},"external_var":false}],"types":[{"html_id":"armature/Armature/Cache/CacheStore","path":"Armature/Cache/CacheStore.html","kind":"module","full_name":"Armature::Cache::CacheStore","name":"CacheStore","abstract":false,"locations":[{"filename":"src/cache.cr","line_number":10,"url":"https://github.com/jgaskins/armature/blob/v0.4.3/src/cache.cr#L10"}],"repository_name":"armature","program":false,"enum":false,"alias":false,"const":false,"including_types":[{"html_id":"armature/Armature/Cache/RedisStore","kind":"class","full_name":"Armature::Cache::RedisStore","name":"RedisStore"}],"namespace":{"html_id":"armature/Armature/Cache","kind":"module","full_name":"Armature::Cache","name":"Cache"},"instance_methods":[{"html_id":"[]=(key:String,value:T):NilforallT-instance-method","name":"[]=","abstract":false,"args":[{"name":"key","external_name":"key","restriction":"String"},{"name":"value","external_name":"value","restriction":"T"}],"args_string":"(key : String, value : T) : Nil forall T","args_html":"(key : String, value : T) : Nil forall T","location":{"filename":"src/cache.cr","line_number":15,"url":"https://github.com/jgaskins/armature/blob/v0.4.3/src/cache.cr#L15"},"def":{"name":"[]=","args":[{"name":"key","external_name":"key","restriction":"String"},{"name":"value","external_name":"value","restriction":"T"}],"return_type":"Nil","visibility":"Public","body":"write(key, value, expires_in: @default_expiration)"},"external_var":false},{"html_id":"[]?(key:String,astype:T.class)forallT-instance-method","name":"[]?","abstract":true,"args":[{"name":"key","external_name":"key","restriction":"String"},{"name":"type","external_name":"as","restriction":"T.class"}],"args_string":"(key : String, as type : T.class) forall T","args_html":"(key : String, as type : <span class=\"t\">T</span>.<span class=\"k\">class</span>) forall T","location":{"filename":"src/cache.cr","line_number":11,"url":"https://github.com/jgaskins/armature/blob/v0.4.3/src/cache.cr#L11"},"def":{"name":"[]?","args":[{"name":"key","external_name":"key","restriction":"String"},{"name":"type","external_name":"as","restriction":"T.class"}],"visibility":"Public","body":""},"external_var":false},{"html_id":"delete(key:String):Nil-instance-method","name":"delete","abstract":true,"args":[{"name":"key","external_name":"key","restriction":"String"}],"args_string":"(key : String) : Nil","args_html":"(key : String) : Nil","location":{"filename":"src/cache.cr","line_number":12,"url":"https://github.com/jgaskins/armature/blob/v0.4.3/src/cache.cr#L12"},"def":{"name":"delete","args":[{"name":"key","external_name":"key","restriction":"String"}],"return_type":"Nil","visibility":"Public","body":""},"external_var":false},{"html_id":"fetch(key:String,expires_induration:Time::Span|Nil,&:->T)forallT-instance-method","name":"fetch","abstract":false,"args":[{"name":"key","external_name":"key","restriction":"String"},{"name":"duration","external_name":"expires_in","restriction":"Time::Span | ::Nil"}],"args_string":"(key : String, expires_in duration : Time::Span | Nil, & :  -> T) forall T","args_html":"(key : String, expires_in duration : Time::Span | Nil, & :  -> T) forall T","location":{"filename":"src/cache.cr","line_number":19,"url":"https://github.com/jgaskins/armature/blob/v0.4.3/src/cache.cr#L19"},"def":{"name":"fetch","args":[{"name":"key","external_name":"key","restriction":"String"},{"name":"duration","external_name":"expires_in","restriction":"Time::Span | ::Nil"}],"yields":0,"block_arity":0,"block_arg":{"name":"","external_name":"","restriction":"(-> T)"},"visibility":"Public","body":"begin\n  value = self[key, as: T]?\nrescue\n  return yield\nend\n\nif value\n  value\nelse\n  value = yield\n  write(key, value, expires_in: duration)\n  value\nend\n"},"external_var":false},{"html_id":"write(key:String,value:T,expires_in:Time::Span|Nil)forallT-instance-method","name":"write","abstract":true,"args":[{"name":"key","external_name":"key","restriction":"String"},{"name":"value","external_name":"value","restriction":"T"},{"name":"expires_in","external_name":"expires_in","restriction":"Time::Span | ::Nil"}],"args_string":"(key : String, value : T, expires_in : Time::Span | Nil) forall T","args_html":"(key : String, value : T, expires_in : Time::Span | Nil) forall T","location":{"filename":"src/cache.cr","line_number":13,"url":"https://github.com/jgaskins/armature/blob/v0.4.3/src/cache.cr#L13"},"def":{"name":"write","args":[{"name":"key","external_name":"key","restriction":"String"},{"name":"value","external_name":"value","restriction":"T"},{"name":"expires_in","external_name":"expires_in","restriction":"Time::Span | ::Nil"}],"visibility":"Public","body":""},"external_var":false}]},{"html_id":"armature/Armature/Cache/RedisStore","path":"Armature/Cache/RedisStore.html","kind":"class","full_name":"Armature::Cache::RedisStore","name":"RedisStore","abstract":false,"superclass":{"html_id":"armature/Reference","kind":"class","full_name":"Reference","name":"Reference"},"ancestors":[{"html_id":"armature/Armature/Cache/CacheStore","kind":"module","full_name":"Armature::Cache::CacheStore","name":"CacheStore"},{"html_id":"armature/Reference","kind":"class","full_name":"Reference","name":"Reference"},{"html_id":"armature/Object","kind":"class","full_name":"Object","name":"Object"}],"locations":[{"filename":"src/cache/redis.cr","line_number":4,"url":"https://github.com/jgaskins/armature/blob/v0.4.3/src/cache/redis.cr#L4"}],"repository_name":"armature","program":false,"enum":false,"alias":false,"const":false,"included_modules":[{"html_id":"armature/Armature/Cache/CacheStore","kind":"module","full_name":"Armature::Cache::CacheStore","name":"CacheStore"}],"namespace":{"html_id":"armature/Armature/Cache","kind":"module","full_name":"Armature::Cache","name":"Cache"},"constructors":[{"html_id":"new(redis:Redis::Client,default_expiration:Time::Span=1.day,log:Log=Log.for(\"armature.cache\"))-class-method","name":"new","abstract":false,"args":[{"name":"redis","external_name":"redis","restriction":"Redis::Client"},{"name":"default_expiration","default_value":"1.day","external_name":"default_expiration","restriction":"Time::Span"},{"name":"log","default_value":"Log.for(\"armature.cache\")","external_name":"log","restriction":"::Log"}],"args_string":"(redis : Redis::Client, default_expiration : Time::Span = 1.day, log : Log = Log.for(\"armature.cache\"))","args_html":"(redis : Redis::Client, default_expiration : Time::Span = <span class=\"n\">1</span>.day, log : Log = <span class=\"t\">Log</span>.<span class=\"k\">for</span>(<span class=\"s\">&quot;armature.cache&quot;</span>))","location":{"filename":"src/cache/redis.cr","line_number":7,"url":"https://github.com/jgaskins/armature/blob/v0.4.3/src/cache/redis.cr#L7"},"def":{"name":"new","args":[{"name":"redis","external_name":"redis","restriction":"Redis::Client"},{"name":"default_expiration","default_value":"1.day","external_name":"default_expiration","restriction":"Time::Span"},{"name":"log","default_value":"Log.for(\"armature.cache\")","external_name":"log","restriction":"::Log"}],"visibility":"Public","body":"_ = allocate\n_.initialize(redis, default_expiration, log)\nif _.responds_to?(:finalize)\n  ::GC.add_finalizer(_)\nend\n_\n"},"external_var":false}],"instance_methods":[{"html_id":"[]?(key:String,astype:T.class):T|NilforallT-instance-method","name":"[]?","abstract":false,"args":[{"name":"key","external_name":"key","restriction":"String"},{"name":"type","external_name":"as","restriction":"T.class"}],"args_string":"(key : String, as type : T.class) : T | Nil forall T","args_html":"(key : String, as type : <span class=\"t\">T</span>.<span class=\"k\">class</span>) : T | Nil forall T","location":{"filename":"src/cache/redis.cr","line_number":14,"url":"https://github.com/jgaskins/armature/blob/v0.4.3/src/cache/redis.cr#L14"},"def":{"name":"[]?","args":[{"name":"key","external_name":"key","restriction":"String"},{"name":"type","external_name":"as","restriction":"T.class"}],"return_type":"T | ::Nil","visibility":"Public","body":"if value = @redis.get(key(key))\n  T.from_msgpack(value)\nend"},"external_var":false},{"html_id":"delete(key:String):Nil-instance-method","name":"delete","abstract":false,"args":[{"name":"key","external_name":"key","restriction":"String"}],"args_string":"(key : String) : Nil","args_html":"(key : String) : Nil","location":{"filename":"src/cache/redis.cr","line_number":20,"url":"https://github.com/jgaskins/armature/blob/v0.4.3/src/cache/redis.cr#L20"},"def":{"name":"delete","args":[{"name":"key","external_name":"key","restriction":"String"}],"return_type":"Nil","visibility":"Public","body":"@redis.del(key(key))"},"external_var":false},{"html_id":"fetch_all(keys:Array(String),astype:T.class):Array(T|Nil)forallT-instance-method","name":"fetch_all","abstract":false,"args":[{"name":"keys","external_name":"keys","restriction":"Array(String)"},{"name":"type","external_name":"as","restriction":"T.class"}],"args_string":"(keys : Array(String), as type : T.class) : Array(T | Nil) forall T","args_html":"(keys : Array(String), as type : <span class=\"t\">T</span>.<span class=\"k\">class</span>) : Array(T | Nil) forall T","location":{"filename":"src/cache/redis.cr","line_number":29,"url":"https://github.com/jgaskins/armature/blob/v0.4.3/src/cache/redis.cr#L29"},"def":{"name":"fetch_all","args":[{"name":"keys","external_name":"keys","restriction":"Array(String)"},{"name":"type","external_name":"as","restriction":"T.class"}],"return_type":"Array(T | ::Nil)","visibility":"Public","body":"if keys.empty?\n  return [] of T | ::Nil\nend\n\n((@redis.mget(keys.map do |key|\n  key(key)\nend)).as(Array)).map do |value|\n  if value\n    T.from_msgpack(value.as(String))\n  end\nend\n"},"external_var":false},{"html_id":"write(key:String,value:T,expires_induration:Time::Span|Nil)forallT-instance-method","name":"write","abstract":false,"args":[{"name":"key","external_name":"key","restriction":"String"},{"name":"value","external_name":"value","restriction":"T"},{"name":"duration","external_name":"expires_in","restriction":"Time::Span | ::Nil"}],"args_string":"(key : String, value : T, expires_in duration : Time::Span | Nil) forall T","args_html":"(key : String, value : T, expires_in duration : Time::Span | Nil) forall T","location":{"filename":"src/cache/redis.cr","line_number":24,"url":"https://github.com/jgaskins/armature/blob/v0.4.3/src/cache/redis.cr#L24"},"def":{"name":"write","args":[{"name":"key","external_name":"key","restriction":"String"},{"name":"value","external_name":"value","restriction":"T"},{"name":"duration","external_name":"expires_in","restriction":"Time::Span | ::Nil"}],"visibility":"Public","body":"string = String.build do |str|\n  value.to_msgpack(str)\nend\n@redis.set(key(key), string, ex: duration)\n"},"external_var":false}]}]},{"html_id":"armature/Armature/Component","path":"Armature/Component.html","kind":"struct","full_name":"Armature::Component","name":"Component","abstract":true,"superclass":{"html_id":"armature/Struct","kind":"struct","full_name":"Struct","name":"Struct"},"ancestors":[{"html_id":"armature/Struct","kind":"struct","full_name":"Struct","name":"Struct"},{"html_id":"armature/Value","kind":"struct","full_name":"Value","name":"Value"},{"html_id":"armature/Object","kind":"class","full_name":"Object","name":"Object"}],"locations":[{"filename":"src/component.cr","line_number":4,"url":"https://github.com/jgaskins/armature/blob/v0.4.3/src/component.cr#L4"}],"repository_name":"armature","program":false,"enum":false,"alias":false,"const":false,"namespace":{"html_id":"armature/Armature","kind":"module","full_name":"Armature","name":"Armature"},"constructors":[{"html_id":"new-class-method","name":"new","abstract":false,"location":{"filename":"src/component.cr","line_number":4,"url":"https://github.com/jgaskins/armature/blob/v0.4.3/src/component.cr#L4"},"def":{"name":"new","visibility":"Public","body":"x = allocate\nif x.responds_to?(:finalize)\n  ::GC.add_finalizer(x)\nend\nx\n"},"external_var":false}],"instance_methods":[{"html_id":"initialize-instance-method","name":"initialize","abstract":false,"location":{"filename":"src/component.cr","line_number":4,"url":"https://github.com/jgaskins/armature/blob/v0.4.3/src/component.cr#L4"},"def":{"name":"initialize","visibility":"Public","body":""},"external_var":false}],"macros":[{"html_id":"def_to_s(template)-macro","name":"def_to_s","abstract":false,"args":[{"name":"template","external_name":"template","restriction":""}],"args_string":"(template)","args_html":"(template)","location":{"filename":"src/component.cr","line_number":5,"url":"https://github.com/jgaskins/armature/blob/v0.4.3/src/component.cr#L5"},"def":{"name":"def_to_s","args":[{"name":"template","external_name":"template","restriction":""}],"visibility":"Public","body":"      ::Armature::Template.def_to_s \"views/\n{{ template.id }}\n.ecr\"\n    \n"}}]},{"html_id":"armature/Armature/Form","path":"Armature/Form.html","kind":"struct","full_name":"Armature::Form","name":"Form","abstract":false,"superclass":{"html_id":"armature/Struct","kind":"struct","full_name":"Struct","name":"Struct"},"ancestors":[{"html_id":"armature/Struct","kind":"struct","full_name":"Struct","name":"Struct"},{"html_id":"armature/Value","kind":"struct","full_name":"Value","name":"Value"},{"html_id":"armature/Object","kind":"class","full_name":"Object","name":"Object"}],"locations":[{"filename":"src/form.cr","line_number":4,"url":"https://github.com/jgaskins/armature/blob/v0.4.3/src/form.cr#L4"}],"repository_name":"armature","program":false,"enum":false,"alias":false,"const":false,"namespace":{"html_id":"armature/Armature","kind":"module","full_name":"Armature","name":"Armature"},"constructors":[{"html_id":"new(response:IO,session:Armature::Session)-class-method","name":"new","abstract":false,"args":[{"name":"response","external_name":"response","restriction":"IO"},{"name":"session","external_name":"session","restriction":"Armature::Session"}],"args_string":"(response : IO, session : Armature::Session)","args_html":"(response : IO, session : <a href=\"../Armature/Session.html\">Armature::Session</a>)","location":{"filename":"src/form.cr","line_number":5,"url":"https://github.com/jgaskins/armature/blob/v0.4.3/src/form.cr#L5"},"def":{"name":"new","args":[{"name":"response","external_name":"response","restriction":"IO"},{"name":"session","external_name":"session","restriction":"Armature::Session"}],"visibility":"Public","body":"_ = allocate\n_.initialize(response, session)\nif _.responds_to?(:finalize)\n  ::GC.add_finalizer(_)\nend\n_\n"},"external_var":false}],"instance_methods":[{"html_id":"call(**kwargs:String|::Nil,&)-instance-method","name":"call","abstract":false,"location":{"filename":"src/form.cr","line_number":8,"url":"https://github.com/jgaskins/armature/blob/v0.4.3/src/form.cr#L8"},"def":{"name":"call","double_splat":{"name":"kwargs","external_name":"kwargs","restriction":"String | ::Nil"},"yields":0,"block_arity":0,"visibility":"Public","body":"@response << \"<form\"\nkwargs.each do |key, value|\n  if value = value.presence\n    @response << ' '\n    HTML.escape(key.to_s, @response)\n    @response << '='\n    @response << '\"'\n    HTML.escape(value, @response)\n    @response << '\"'\n  else\n    @response << \"\\\"\\\"\"\n  end\nend\n@response << '>'\nyield\n@response << \"</form>\"\n"},"external_var":false}],"types":[{"html_id":"armature/Armature/Form/Helper","path":"Armature/Form/Helper.html","kind":"module","full_name":"Armature::Form::Helper","name":"Helper","abstract":false,"locations":[{"filename":"src/form.cr","line_number":27,"url":"https://github.com/jgaskins/armature/blob/v0.4.3/src/form.cr#L27"}],"repository_name":"armature","program":false,"enum":false,"alias":false,"const":false,"extended_modules":[{"html_id":"armature/Armature/Form/Helper","kind":"module","full_name":"Armature::Form::Helper","name":"Helper"}],"namespace":{"html_id":"armature/Armature/Form","kind":"struct","full_name":"Armature::Form","name":"Form"},"instance_methods":[{"html_id":"authenticity_token_for(session)-instance-method","name":"authenticity_token_for","abstract":false,"args":[{"name":"session","external_name":"session","restriction":""}],"args_string":"(session)","args_html":"(session)","location":{"filename":"src/form.cr","line_number":40,"url":"https://github.com/jgaskins/armature/blob/v0.4.3/src/form.cr#L40"},"def":{"name":"authenticity_token_for","args":[{"name":"session","external_name":"session","restriction":""}],"visibility":"Public","body":"token = Bytes.new(64)\npadded = token + 32\none_time_pad = Random::Secure.random_bytes(32)\nif csrf = unwrap_session_value(session[\"csrf\"]?)\n  csrf = Base64.decode(csrf)\nelse\n  csrf = generate_authenticity_token!(session)\nend\n\ncsrf.each_with_index do |byte, index|\n  padded[index] = byte ^ one_time_pad[index]\n  token[index] = one_time_pad[index]\nend\n\nBase64.strict_encode(token)\n"},"external_var":false},{"html_id":"generate_authenticity_token!(session)-instance-method","name":"generate_authenticity_token!","abstract":false,"args":[{"name":"session","external_name":"session","restriction":""}],"args_string":"(session)","args_html":"(session)","location":{"filename":"src/form.cr","line_number":58,"url":"https://github.com/jgaskins/armature/blob/v0.4.3/src/form.cr#L58"},"def":{"name":"generate_authenticity_token!","args":[{"name":"session","external_name":"session","restriction":""}],"visibility":"Public","body":"csrf = Random::Secure.random_bytes(32)\nsession[\"csrf\"] = Base64.strict_encode(csrf)\ncsrf\n"},"external_var":false},{"html_id":"unwrap_session_value(value)-instance-method","name":"unwrap_session_value","abstract":false,"args":[{"name":"value","external_name":"value","restriction":""}],"args_string":"(value)","args_html":"(value)","location":{"filename":"src/form.cr","line_number":86,"url":"https://github.com/jgaskins/armature/blob/v0.4.3/src/form.cr#L86"},"def":{"name":"unwrap_session_value","args":[{"name":"value","external_name":"value","restriction":""}],"visibility":"Public","body":"if value.responds_to?(:\"as_s?\")\n  value.as_s?\nelse\n  value\nend"},"external_var":false},{"html_id":"valid_authenticity_token?(form_params:URI::Params,session)-instance-method","name":"valid_authenticity_token?","abstract":false,"args":[{"name":"form_params","external_name":"form_params","restriction":"URI::Params"},{"name":"session","external_name":"session","restriction":""}],"args_string":"(form_params : URI::Params, session)","args_html":"(form_params : URI::Params, session)","location":{"filename":"src/form.cr","line_number":64,"url":"https://github.com/jgaskins/armature/blob/v0.4.3/src/form.cr#L64"},"def":{"name":"valid_authenticity_token?","args":[{"name":"form_params","external_name":"form_params","restriction":"URI::Params"},{"name":"session","external_name":"session","restriction":""}],"visibility":"Public","body":"if token = form_params[\"_authenticity_token\"]?\nelse\n  return false\nend\nif csrf = unwrap_session_value(session[\"csrf\"]?)\n  csrf = Base64.decode(csrf)\n  if csrf.size != 32\n    return false\n  end\nelse\n  return false\nend\n\ntoken = Base64.decode(token)\nif token.size != 64\n  return false\nend\n\npad = token[0...32]\nchallenge = token[32...64]\n\nchallenge.each_with_index do |byte, index|\n  challenge[index] = byte ^ pad[index]\nend\n\nchallenge == csrf\n"},"external_var":false}],"macros":[{"html_id":"form(response=\"response\",session=\"session\",**kwargs,&block)-macro","name":"form","abstract":false,"args":[{"name":"response","default_value":"\"response\"","external_name":"response","restriction":""},{"name":"session","default_value":"\"session\"","external_name":"session","restriction":""}],"args_string":"(response = \"response\", session = \"session\", **kwargs, &block)","args_html":"(response = <span class=\"s\">&quot;response&quot;</span>, session = <span class=\"s\">&quot;session&quot;</span>, **kwargs, &block)","location":{"filename":"src/form.cr","line_number":30,"url":"https://github.com/jgaskins/armature/blob/v0.4.3/src/form.cr#L30"},"def":{"name":"form","args":[{"name":"response","default_value":"\"response\"","external_name":"response","restriction":""},{"name":"session","default_value":"\"session\"","external_name":"session","restriction":""}],"double_splat":{"name":"kwargs","external_name":"kwargs","restriction":""},"block_arg":{"name":"block","external_name":"block","restriction":""},"visibility":"Public","body":"        \n{% if kwargs.empty?\n  kwargs = \"NamedTuple.new\".id\nend %}\n\n        ::Armature::Form.new(response: \n{{ response.id }}\n, session: \n{{ session.id }}\n).call(**\n{{ kwargs }}\n) do \n{% if block.args.empty? %}{% else %} |{{ (block.args.join(\", \")).id }}| {% end %}\n\n          unless (\n{{ kwargs[:method] }}\n || \"\").upcase.in?(\n{\"GET\", \"HEAD\", \"\"})\n            \n{{ response.id }}\n << %{<input type=\"hidden\" name=\"_authenticity_token\" value=\"#{authenticity_token_for(\n{{ session.id }}\n)}\"/>}\n          \nend\n          \n{{ yield }}\n\n        \nend\n      \n"}}]}]},{"html_id":"armature/Armature/Route","path":"Armature/Route.html","kind":"module","full_name":"Armature::Route","name":"Route","abstract":false,"locations":[{"filename":"src/route.cr","line_number":8,"url":"https://github.com/jgaskins/armature/blob/v0.4.3/src/route.cr#L8"}],"repository_name":"armature","program":false,"enum":false,"alias":false,"const":false,"namespace":{"html_id":"armature/Armature","kind":"module","full_name":"Armature","name":"Armature"},"instance_methods":[{"html_id":"route(context,&block:Request,Response,Armature::Session->)-instance-method","name":"route","abstract":false,"args":[{"name":"context","external_name":"context","restriction":""}],"args_string":"(context, &block : Request, Response, Armature::Session -> )","args_html":"(context, &block : <a href=\"../Armature/Route/Request.html\">Request</a>, <a href=\"../Armature/Route/Response.html\">Response</a>, <a href=\"../Armature/Session.html\">Armature::Session</a> -> )","location":{"filename":"src/route.cr","line_number":9,"url":"https://github.com/jgaskins/armature/blob/v0.4.3/src/route.cr#L9"},"def":{"name":"route","args":[{"name":"context","external_name":"context","restriction":""}],"yields":3,"block_arity":3,"block_arg":{"name":"block","external_name":"block","restriction":"(Request, Response, Armature::Session ->)"},"visibility":"Public","body":"response = Response.new(context)\nrequest = Request.new(context)\n\nyield request, response, context.session\n"},"external_var":false},{"html_id":"safe(value)-instance-method","name":"safe","abstract":false,"args":[{"name":"value","external_name":"value","restriction":""}],"args_string":"(value)","args_html":"(value)","location":{"filename":"src/route.cr","line_number":20,"url":"https://github.com/jgaskins/armature/blob/v0.4.3/src/route.cr#L20"},"def":{"name":"safe","args":[{"name":"value","external_name":"value","restriction":""}],"visibility":"Public","body":"::Armature::Template::HTML::SafeValue.new(value)"},"external_var":false}],"macros":[{"html_id":"render(template,toio=response)-macro","name":"render","abstract":false,"args":[{"name":"template","external_name":"template","restriction":""},{"name":"io","default_value":"response","external_name":"to","restriction":""}],"args_string":"(template, to io = response)","args_html":"(template, to io = response)","location":{"filename":"src/route.cr","line_number":16,"url":"https://github.com/jgaskins/armature/blob/v0.4.3/src/route.cr#L16"},"def":{"name":"render","args":[{"name":"template","external_name":"template","restriction":""},{"name":"io","default_value":"response","external_name":"to","restriction":""}],"visibility":"Public","body":"      ::Armature::Template.embed \"views/\n{{ template.id }}\n.ecr\", \n{{ io }}\n\n    \n"}}],"types":[{"html_id":"armature/Armature/Route/Request","path":"Armature/Route/Request.html","kind":"class","full_name":"Armature::Route::Request","name":"Request","abstract":false,"superclass":{"html_id":"armature/Reference","kind":"class","full_name":"Reference","name":"Reference"},"ancestors":[{"html_id":"armature/Reference","kind":"class","full_name":"Reference","name":"Reference"},{"html_id":"armature/Object","kind":"class","full_name":"Object","name":"Object"}],"locations":[{"filename":"src/route.cr","line_number":24,"url":"https://github.com/jgaskins/armature/blob/v0.4.3/src/route.cr#L24"}],"repository_name":"armature","program":false,"enum":false,"alias":false,"const":false,"namespace":{"html_id":"armature/Armature/Route","kind":"module","full_name":"Armature::Route","name":"Route"},"constructors":[{"html_id":"new(context:HTTP::Server::Context)-class-method","name":"new","abstract":false,"args":[{"name":"context","external_name":"context","restriction":"::HTTP::Server::Context"}],"args_string":"(context : HTTP::Server::Context)","args_html":"(context : HTTP::Server::Context)","location":{"filename":"src/route.cr","line_number":32,"url":"https://github.com/jgaskins/armature/blob/v0.4.3/src/route.cr#L32"},"def":{"name":"new","args":[{"name":"context","external_name":"context","restriction":"::HTTP::Server::Context"}],"visibility":"Public","body":"_ = allocate\n_.initialize(context)\nif _.responds_to?(:finalize)\n  ::GC.add_finalizer(_)\nend\n_\n"},"external_var":false}],"instance_methods":[{"html_id":"body(*args,**options)-instance-method","name":"body","abstract":false,"args":[{"name":"args","external_name":"args","restriction":""}],"args_string":"(*args, **options)","args_html":"(*args, **options)","location":{"filename":"src/route.cr","line_number":25,"url":"https://github.com/jgaskins/armature/blob/v0.4.3/src/route.cr#L25"},"def":{"name":"body","args":[{"name":"args","external_name":"args","restriction":""}],"double_splat":{"name":"options","external_name":"options","restriction":""},"splat_index":0,"visibility":"Public","body":"original_request.body(*args, **options)"},"external_var":false},{"html_id":"body(*args,**options,&)-instance-method","name":"body","abstract":false,"args":[{"name":"args","external_name":"args","restriction":""}],"args_string":"(*args, **options, &)","args_html":"(*args, **options, &)","location":{"filename":"src/route.cr","line_number":25,"url":"https://github.com/jgaskins/armature/blob/v0.4.3/src/route.cr#L25"},"def":{"name":"body","args":[{"name":"args","external_name":"args","restriction":""}],"double_splat":{"name":"options","external_name":"options","restriction":""},"splat_index":0,"yields":1,"block_arity":1,"visibility":"Public","body":"original_request.body(*args, **options) do |*yield_args|\n  yield *yield_args\nend"},"external_var":false},{"html_id":"context:HTTP::Server::Context-instance-method","name":"context","abstract":false,"location":{"filename":"src/route.cr","line_number":27,"url":"https://github.com/jgaskins/armature/blob/v0.4.3/src/route.cr#L27"},"def":{"name":"context","return_type":"HTTP::Server::Context","visibility":"Public","body":"@context"},"external_var":false},{"html_id":"cookies(*args,**options)-instance-method","name":"cookies","abstract":false,"args":[{"name":"args","external_name":"args","restriction":""}],"args_string":"(*args, **options)","args_html":"(*args, **options)","location":{"filename":"src/route.cr","line_number":25,"url":"https://github.com/jgaskins/armature/blob/v0.4.3/src/route.cr#L25"},"def":{"name":"cookies","args":[{"name":"args","external_name":"args","restriction":""}],"double_splat":{"name":"options","external_name":"options","restriction":""},"splat_index":0,"visibility":"Public","body":"original_request.cookies(*args, **options)"},"external_var":false},{"html_id":"cookies(*args,**options,&)-instance-method","name":"cookies","abstract":false,"args":[{"name":"args","external_name":"args","restriction":""}],"args_string":"(*args, **options, &)","args_html":"(*args, **options, &)","location":{"filename":"src/route.cr","line_number":25,"url":"https://github.com/jgaskins/armature/blob/v0.4.3/src/route.cr#L25"},"def":{"name":"cookies","args":[{"name":"args","external_name":"args","restriction":""}],"double_splat":{"name":"options","external_name":"options","restriction":""},"splat_index":0,"yields":1,"block_arity":1,"visibility":"Public","body":"original_request.cookies(*args, **options) do |*yield_args|\n  yield *yield_args\nend"},"external_var":false},{"html_id":"delete(capture:Symbol,&)-instance-method","name":"delete","abstract":false,"args":[{"name":"capture","external_name":"capture","restriction":"Symbol"}],"args_string":"(capture : Symbol, &)","args_html":"(capture : Symbol, &)","location":{"filename":"src/route.cr","line_number":77,"url":"https://github.com/jgaskins/armature/blob/v0.4.3/src/route.cr#L77"},"def":{"name":"delete","args":[{"name":"capture","external_name":"capture","restriction":"Symbol"}],"yields":1,"block_arity":1,"visibility":"Public","body":"is(capture) do |capture|\n  delete do\n    yield capture\n  end\nend"},"external_var":false},{"html_id":"delete(path:String,&)-instance-method","name":"delete","abstract":false,"args":[{"name":"path","external_name":"path","restriction":"String"}],"args_string":"(path : String, &)","args_html":"(path : String, &)","location":{"filename":"src/route.cr","line_number":77,"url":"https://github.com/jgaskins/armature/blob/v0.4.3/src/route.cr#L77"},"def":{"name":"delete","args":[{"name":"path","external_name":"path","restriction":"String"}],"yields":0,"block_arity":0,"visibility":"Public","body":"is(path) do\n  delete do\n    yield\n  end\nend"},"external_var":false},{"html_id":"delete(&)-instance-method","name":"delete","abstract":false,"location":{"filename":"src/route.cr","line_number":77,"url":"https://github.com/jgaskins/armature/blob/v0.4.3/src/route.cr#L77"},"def":{"name":"delete","yields":0,"block_arity":0,"visibility":"Public","body":"if handled?\n  return\nend\n\nif original_request.method == \"DELETE\"\n  begin\n    yield\n  ensure\n    handled!\n  end\nend\n"},"external_var":false},{"html_id":"form_params-instance-method","name":"form_params","abstract":false,"location":{"filename":"src/route.cr","line_number":39,"url":"https://github.com/jgaskins/armature/blob/v0.4.3/src/route.cr#L39"},"def":{"name":"form_params","visibility":"Public","body":"context.armature_form_params"},"external_var":false},{"html_id":"get(capture:Symbol,&)-instance-method","name":"get","abstract":false,"args":[{"name":"capture","external_name":"capture","restriction":"Symbol"}],"args_string":"(capture : Symbol, &)","args_html":"(capture : Symbol, &)","location":{"filename":"src/route.cr","line_number":77,"url":"https://github.com/jgaskins/armature/blob/v0.4.3/src/route.cr#L77"},"def":{"name":"get","args":[{"name":"capture","external_name":"capture","restriction":"Symbol"}],"yields":1,"block_arity":1,"visibility":"Public","body":"is(capture) do |capture|\n  get do\n    yield capture\n  end\nend"},"external_var":false},{"html_id":"get(path:String,&)-instance-method","name":"get","abstract":false,"args":[{"name":"path","external_name":"path","restriction":"String"}],"args_string":"(path : String, &)","args_html":"(path : String, &)","location":{"filename":"src/route.cr","line_number":77,"url":"https://github.com/jgaskins/armature/blob/v0.4.3/src/route.cr#L77"},"def":{"name":"get","args":[{"name":"path","external_name":"path","restriction":"String"}],"yields":0,"block_arity":0,"visibility":"Public","body":"is(path) do\n  get do\n    yield\n  end\nend"},"external_var":false},{"html_id":"get(&)-instance-method","name":"get","abstract":false,"location":{"filename":"src/route.cr","line_number":77,"url":"https://github.com/jgaskins/armature/blob/v0.4.3/src/route.cr#L77"},"def":{"name":"get","yields":0,"block_arity":0,"visibility":"Public","body":"if handled?\n  return\nend\n\nif original_request.method == \"GET\"\n  begin\n    yield\n  ensure\n    handled!\n  end\nend\n"},"external_var":false},{"html_id":"handled!-instance-method","name":"handled!","abstract":false,"location":{"filename":"src/route.cr","line_number":241,"url":"https://github.com/jgaskins/armature/blob/v0.4.3/src/route.cr#L241"},"def":{"name":"handled!","visibility":"Public","body":"context.handled!"},"external_var":false},{"html_id":"handled?-instance-method","name":"handled?","abstract":false,"location":{"filename":"src/route.cr","line_number":237,"url":"https://github.com/jgaskins/armature/blob/v0.4.3/src/route.cr#L237"},"def":{"name":"handled?","visibility":"Public","body":"context.handled?"},"external_var":false},{"html_id":"headers(*args,**options)-instance-method","name":"headers","abstract":false,"args":[{"name":"args","external_name":"args","restriction":""}],"args_string":"(*args, **options)","args_html":"(*args, **options)","location":{"filename":"src/route.cr","line_number":25,"url":"https://github.com/jgaskins/armature/blob/v0.4.3/src/route.cr#L25"},"def":{"name":"headers","args":[{"name":"args","external_name":"args","restriction":""}],"double_splat":{"name":"options","external_name":"options","restriction":""},"splat_index":0,"visibility":"Public","body":"original_request.headers(*args, **options)"},"external_var":false},{"html_id":"headers(*args,**options,&)-instance-method","name":"headers","abstract":false,"args":[{"name":"args","external_name":"args","restriction":""}],"args_string":"(*args, **options, &)","args_html":"(*args, **options, &)","location":{"filename":"src/route.cr","line_number":25,"url":"https://github.com/jgaskins/armature/blob/v0.4.3/src/route.cr#L25"},"def":{"name":"headers","args":[{"name":"args","external_name":"args","restriction":""}],"double_splat":{"name":"options","external_name":"options","restriction":""},"splat_index":0,"yields":1,"block_arity":1,"visibility":"Public","body":"original_request.headers(*args, **options) do |*yield_args|\n  yield *yield_args\nend"},"external_var":false},{"html_id":"headers=(arg)-instance-method","name":"headers=","abstract":false,"args":[{"name":"arg","external_name":"arg","restriction":""}],"args_string":"(arg)","args_html":"(arg)","location":{"filename":"src/route.cr","line_number":25,"url":"https://github.com/jgaskins/armature/blob/v0.4.3/src/route.cr#L25"},"def":{"name":"headers=","args":[{"name":"arg","external_name":"arg","restriction":""}],"visibility":"Public","body":"original_request.headers = arg"},"external_var":false},{"html_id":"is(&)-instance-method","name":"is","abstract":false,"location":{"filename":"src/route.cr","line_number":79,"url":"https://github.com/jgaskins/armature/blob/v0.4.3/src/route.cr#L79"},"def":{"name":"is","yields":0,"block_arity":0,"visibility":"Public","body":"begin\n  if handled?\n    return\n  end\n\n  if (path == \"\") || (path == \"/\")\n    old_path = original_request.path\n    begin\n      yield\n    ensure\n      handled!\n    end\n  end\nensure\n  if old_path\n    original_request.path = old_path\n  end\nend"},"external_var":false},{"html_id":"is(*segments,&)-instance-method","name":"is","abstract":false,"args":[{"name":"segments","external_name":"segments","restriction":""}],"args_string":"(*segments, &)","args_html":"(*segments, &)","location":{"filename":"src/route.cr","line_number":96,"url":"https://github.com/jgaskins/armature/blob/v0.4.3/src/route.cr#L96"},"def":{"name":"is","args":[{"name":"segments","external_name":"segments","restriction":""}],"splat_index":0,"yields":1,"block_arity":1,"visibility":"Public","body":"if handled?\n  return\nend\n\non(*segments) do |*captures|\n  if (path == \"\") || (path == \"/\")\n    yield(*captures)\n    handled!\n  end\nend\n"},"external_var":false},{"html_id":"json?-instance-method","name":"json?","abstract":false,"location":{"filename":"src/route.cr","line_number":225,"url":"https://github.com/jgaskins/armature/blob/v0.4.3/src/route.cr#L225"},"def":{"name":"json?","visibility":"Public","body":"((path.ends_with?(\"json\")) || (headers[\"Content-Type\"]? =~ (/json/))) || (headers[\"Accept\"]? =~ (/json/))"},"external_var":false},{"html_id":"match?(segment:String,matcher:String)-instance-method","name":"match?","abstract":false,"args":[{"name":"segment","external_name":"segment","restriction":"String"},{"name":"matcher","external_name":"matcher","restriction":"String"}],"args_string":"(segment : String, matcher : String)","args_html":"(segment : String, matcher : String)","location":{"filename":"src/route.cr","line_number":178,"url":"https://github.com/jgaskins/armature/blob/v0.4.3/src/route.cr#L178"},"def":{"name":"match?","args":[{"name":"segment","external_name":"segment","restriction":"String"},{"name":"matcher","external_name":"matcher","restriction":"String"}],"visibility":"Public","body":"if matcher.starts_with?(segment)\n  segment\nend"},"external_var":false},{"html_id":"match?(segment:String,matcher:Int8.class)-instance-method","name":"match?","abstract":false,"args":[{"name":"segment","external_name":"segment","restriction":"String"},{"name":"matcher","external_name":"matcher","restriction":"Int8.class"}],"args_string":"(segment : String, matcher : Int8.class)","args_html":"(segment : String, matcher : <span class=\"t\">Int8</span>.<span class=\"k\">class</span>)","location":{"filename":"src/route.cr","line_number":184,"url":"https://github.com/jgaskins/armature/blob/v0.4.3/src/route.cr#L184"},"def":{"name":"match?","args":[{"name":"segment","external_name":"segment","restriction":"String"},{"name":"matcher","external_name":"matcher","restriction":"Int8.class"}],"visibility":"Public","body":"segment.to_i8?"},"external_var":false},{"html_id":"match?(segment:String,matcher:Int16.class)-instance-method","name":"match?","abstract":false,"args":[{"name":"segment","external_name":"segment","restriction":"String"},{"name":"matcher","external_name":"matcher","restriction":"Int16.class"}],"args_string":"(segment : String, matcher : Int16.class)","args_html":"(segment : String, matcher : <span class=\"t\">Int16</span>.<span class=\"k\">class</span>)","location":{"filename":"src/route.cr","line_number":184,"url":"https://github.com/jgaskins/armature/blob/v0.4.3/src/route.cr#L184"},"def":{"name":"match?","args":[{"name":"segment","external_name":"segment","restriction":"String"},{"name":"matcher","external_name":"matcher","restriction":"Int16.class"}],"visibility":"Public","body":"segment.to_i16?"},"external_var":false},{"html_id":"match?(segment:String,matcher:Int32.class)-instance-method","name":"match?","abstract":false,"args":[{"name":"segment","external_name":"segment","restriction":"String"},{"name":"matcher","external_name":"matcher","restriction":"Int32.class"}],"args_string":"(segment : String, matcher : Int32.class)","args_html":"(segment : String, matcher : <span class=\"t\">Int32</span>.<span class=\"k\">class</span>)","location":{"filename":"src/route.cr","line_number":184,"url":"https://github.com/jgaskins/armature/blob/v0.4.3/src/route.cr#L184"},"def":{"name":"match?","args":[{"name":"segment","external_name":"segment","restriction":"String"},{"name":"matcher","external_name":"matcher","restriction":"Int32.class"}],"visibility":"Public","body":"segment.to_i32?"},"external_var":false},{"html_id":"match?(segment:String,matcher:Int64.class)-instance-method","name":"match?","abstract":false,"args":[{"name":"segment","external_name":"segment","restriction":"String"},{"name":"matcher","external_name":"matcher","restriction":"Int64.class"}],"args_string":"(segment : String, matcher : Int64.class)","args_html":"(segment : String, matcher : <span class=\"t\">Int64</span>.<span class=\"k\">class</span>)","location":{"filename":"src/route.cr","line_number":184,"url":"https://github.com/jgaskins/armature/blob/v0.4.3/src/route.cr#L184"},"def":{"name":"match?","args":[{"name":"segment","external_name":"segment","restriction":"String"},{"name":"matcher","external_name":"matcher","restriction":"Int64.class"}],"visibility":"Public","body":"segment.to_i64?"},"external_var":false},{"html_id":"match?(segment:String,matcher:Int128.class)-instance-method","name":"match?","abstract":false,"args":[{"name":"segment","external_name":"segment","restriction":"String"},{"name":"matcher","external_name":"matcher","restriction":"Int128.class"}],"args_string":"(segment : String, matcher : Int128.class)","args_html":"(segment : String, matcher : <span class=\"t\">Int128</span>.<span class=\"k\">class</span>)","location":{"filename":"src/route.cr","line_number":184,"url":"https://github.com/jgaskins/armature/blob/v0.4.3/src/route.cr#L184"},"def":{"name":"match?","args":[{"name":"segment","external_name":"segment","restriction":"String"},{"name":"matcher","external_name":"matcher","restriction":"Int128.class"}],"visibility":"Public","body":"segment.to_i128?"},"external_var":false},{"html_id":"match?(segment:String,matcher:UInt8.class)-instance-method","name":"match?","abstract":false,"args":[{"name":"segment","external_name":"segment","restriction":"String"},{"name":"matcher","external_name":"matcher","restriction":"UInt8.class"}],"args_string":"(segment : String, matcher : UInt8.class)","args_html":"(segment : String, matcher : <span class=\"t\">UInt8</span>.<span class=\"k\">class</span>)","location":{"filename":"src/route.cr","line_number":184,"url":"https://github.com/jgaskins/armature/blob/v0.4.3/src/route.cr#L184"},"def":{"name":"match?","args":[{"name":"segment","external_name":"segment","restriction":"String"},{"name":"matcher","external_name":"matcher","restriction":"UInt8.class"}],"visibility":"Public","body":"segment.to_u8?"},"external_var":false},{"html_id":"match?(segment:String,matcher:UInt16.class)-instance-method","name":"match?","abstract":false,"args":[{"name":"segment","external_name":"segment","restriction":"String"},{"name":"matcher","external_name":"matcher","restriction":"UInt16.class"}],"args_string":"(segment : String, matcher : UInt16.class)","args_html":"(segment : String, matcher : <span class=\"t\">UInt16</span>.<span class=\"k\">class</span>)","location":{"filename":"src/route.cr","line_number":184,"url":"https://github.com/jgaskins/armature/blob/v0.4.3/src/route.cr#L184"},"def":{"name":"match?","args":[{"name":"segment","external_name":"segment","restriction":"String"},{"name":"matcher","external_name":"matcher","restriction":"UInt16.class"}],"visibility":"Public","body":"segment.to_u16?"},"external_var":false},{"html_id":"match?(segment:String,matcher:UInt32.class)-instance-method","name":"match?","abstract":false,"args":[{"name":"segment","external_name":"segment","restriction":"String"},{"name":"matcher","external_name":"matcher","restriction":"UInt32.class"}],"args_string":"(segment : String, matcher : UInt32.class)","args_html":"(segment : String, matcher : <span class=\"t\">UInt32</span>.<span class=\"k\">class</span>)","location":{"filename":"src/route.cr","line_number":184,"url":"https://github.com/jgaskins/armature/blob/v0.4.3/src/route.cr#L184"},"def":{"name":"match?","args":[{"name":"segment","external_name":"segment","restriction":"String"},{"name":"matcher","external_name":"matcher","restriction":"UInt32.class"}],"visibility":"Public","body":"segment.to_u32?"},"external_var":false},{"html_id":"match?(segment:String,matcher:UInt64.class)-instance-method","name":"match?","abstract":false,"args":[{"name":"segment","external_name":"segment","restriction":"String"},{"name":"matcher","external_name":"matcher","restriction":"UInt64.class"}],"args_string":"(segment : String, matcher : UInt64.class)","args_html":"(segment : String, matcher : <span class=\"t\">UInt64</span>.<span class=\"k\">class</span>)","location":{"filename":"src/route.cr","line_number":184,"url":"https://github.com/jgaskins/armature/blob/v0.4.3/src/route.cr#L184"},"def":{"name":"match?","args":[{"name":"segment","external_name":"segment","restriction":"String"},{"name":"matcher","external_name":"matcher","restriction":"UInt64.class"}],"visibility":"Public","body":"segment.to_u64?"},"external_var":false},{"html_id":"match?(segment:String,matcher:UInt128.class)-instance-method","name":"match?","abstract":false,"args":[{"name":"segment","external_name":"segment","restriction":"String"},{"name":"matcher","external_name":"matcher","restriction":"UInt128.class"}],"args_string":"(segment : String, matcher : UInt128.class)","args_html":"(segment : String, matcher : <span class=\"t\">UInt128</span>.<span class=\"k\">class</span>)","location":{"filename":"src/route.cr","line_number":184,"url":"https://github.com/jgaskins/armature/blob/v0.4.3/src/route.cr#L184"},"def":{"name":"match?","args":[{"name":"segment","external_name":"segment","restriction":"String"},{"name":"matcher","external_name":"matcher","restriction":"UInt128.class"}],"visibility":"Public","body":"segment.to_u128?"},"external_var":false},{"html_id":"match?(segment:String,matcher:Symbol|String.class)-instance-method","name":"match?","abstract":false,"args":[{"name":"segment","external_name":"segment","restriction":"String"},{"name":"matcher","external_name":"matcher","restriction":"Symbol | String.class"}],"args_string":"(segment : String, matcher : Symbol | String.class)","args_html":"(segment : String, matcher : Symbol | <span class=\"t\">String</span>.<span class=\"k\">class</span>)","location":{"filename":"src/route.cr","line_number":192,"url":"https://github.com/jgaskins/armature/blob/v0.4.3/src/route.cr#L192"},"def":{"name":"match?","args":[{"name":"segment","external_name":"segment","restriction":"String"},{"name":"matcher","external_name":"matcher","restriction":"Symbol | String.class"}],"visibility":"Public","body":"segment"},"external_var":false},{"html_id":"match?(segment:String,matcher:UUID.class)-instance-method","name":"match?","abstract":false,"args":[{"name":"segment","external_name":"segment","restriction":"String"},{"name":"matcher","external_name":"matcher","restriction":"UUID.class"}],"args_string":"(segment : String, matcher : UUID.class)","args_html":"(segment : String, matcher : <span class=\"t\">UUID</span>.<span class=\"k\">class</span>)","location":{"filename":"src/route.cr","line_number":196,"url":"https://github.com/jgaskins/armature/blob/v0.4.3/src/route.cr#L196"},"def":{"name":"match?","args":[{"name":"segment","external_name":"segment","restriction":"String"},{"name":"matcher","external_name":"matcher","restriction":"UUID.class"}],"visibility":"Public","body":"UUID.parse?(segment)"},"external_var":false},{"html_id":"match?(segment:String,matcher:Regex)-instance-method","name":"match?","abstract":false,"args":[{"name":"segment","external_name":"segment","restriction":"String"},{"name":"matcher","external_name":"matcher","restriction":"Regex"}],"args_string":"(segment : String, matcher : Regex)","args_html":"(segment : String, matcher : Regex)","location":{"filename":"src/route.cr","line_number":200,"url":"https://github.com/jgaskins/armature/blob/v0.4.3/src/route.cr#L200"},"def":{"name":"match?","args":[{"name":"segment","external_name":"segment","restriction":"String"},{"name":"matcher","external_name":"matcher","restriction":"Regex"}],"visibility":"Public","body":"matcher.match(segment)"},"external_var":false},{"html_id":"match?(segment:String,matcher)-instance-method","name":"match?","abstract":false,"args":[{"name":"segment","external_name":"segment","restriction":"String"},{"name":"matcher","external_name":"matcher","restriction":""}],"args_string":"(segment : String, matcher)","args_html":"(segment : String, matcher)","location":{"filename":"src/route.cr","line_number":174,"url":"https://github.com/jgaskins/armature/blob/v0.4.3/src/route.cr#L174"},"def":{"name":"match?","args":[{"name":"segment","external_name":"segment","restriction":"String"},{"name":"matcher","external_name":"matcher","restriction":""}],"visibility":"Public","body":"matcher === segment"},"external_var":false},{"html_id":"method(*args,**options)-instance-method","name":"method","abstract":false,"args":[{"name":"args","external_name":"args","restriction":""}],"args_string":"(*args, **options)","args_html":"(*args, **options)","location":{"filename":"src/route.cr","line_number":25,"url":"https://github.com/jgaskins/armature/blob/v0.4.3/src/route.cr#L25"},"def":{"name":"method","args":[{"name":"args","external_name":"args","restriction":""}],"double_splat":{"name":"options","external_name":"options","restriction":""},"splat_index":0,"visibility":"Public","body":"original_request.method(*args, **options)"},"external_var":false},{"html_id":"method(*args,**options,&)-instance-method","name":"method","abstract":false,"args":[{"name":"args","external_name":"args","restriction":""}],"args_string":"(*args, **options, &)","args_html":"(*args, **options, &)","location":{"filename":"src/route.cr","line_number":25,"url":"https://github.com/jgaskins/armature/blob/v0.4.3/src/route.cr#L25"},"def":{"name":"method","args":[{"name":"args","external_name":"args","restriction":""}],"double_splat":{"name":"options","external_name":"options","restriction":""},"splat_index":0,"yields":1,"block_arity":1,"visibility":"Public","body":"original_request.method(*args, **options) do |*yield_args|\n  yield *yield_args\nend"},"external_var":false},{"html_id":"miss(&)-instance-method","name":"miss","abstract":false,"location":{"filename":"src/route.cr","line_number":215,"url":"https://github.com/jgaskins/armature/blob/v0.4.3/src/route.cr#L215"},"def":{"name":"miss","yields":0,"block_arity":0,"visibility":"Public","body":"if handled?\n  return\nend\n\nbegin\n  yield\nensure\n  handled!\nend\n"},"external_var":false},{"html_id":"on(*segments,&)-instance-method","name":"on","abstract":false,"args":[{"name":"segments","external_name":"segments","restriction":""}],"args_string":"(*segments, &)","args_html":"(*segments, &)","location":{"filename":"src/route.cr","line_number":107,"url":"https://github.com/jgaskins/armature/blob/v0.4.3/src/route.cr#L107"},"def":{"name":"on","args":[{"name":"segments","external_name":"segments","restriction":""}],"splat_index":0,"yields":1,"block_arity":1,"visibility":"Public","body":"if handled?\n  return\nend\n\non(segments) do |captures|\n  yield *captures\nend\n"},"external_var":false},{"html_id":"on(**segments,&)-instance-method","name":"on","abstract":false,"location":{"filename":"src/route.cr","line_number":168,"url":"https://github.com/jgaskins/armature/blob/v0.4.3/src/route.cr#L168"},"def":{"name":"on","double_splat":{"name":"segments","external_name":"segments","restriction":""},"yields":1,"block_arity":1,"visibility":"Public","body":"on(*segments.values) do |*args|\n  yield *args\nend"},"external_var":false},{"html_id":"original_path-instance-method","name":"original_path","abstract":false,"location":{"filename":"src/route.cr","line_number":43,"url":"https://github.com/jgaskins/armature/blob/v0.4.3/src/route.cr#L43"},"def":{"name":"original_path","visibility":"Public","body":"context.original_request_path"},"external_var":false},{"html_id":"original_request:HTTP::Request-instance-method","name":"original_request","abstract":false,"location":{"filename":"src/route.cr","line_number":28,"url":"https://github.com/jgaskins/armature/blob/v0.4.3/src/route.cr#L28"},"def":{"name":"original_request","return_type":"HTTP::Request","visibility":"Public","body":"if (__temp_177 = @original_request).nil?\n  @original_request = (context.request)\nelse\n  __temp_177\nend"},"external_var":false},{"html_id":"params-instance-method","name":"params","abstract":false,"location":{"filename":"src/route.cr","line_number":35,"url":"https://github.com/jgaskins/armature/blob/v0.4.3/src/route.cr#L35"},"def":{"name":"params","visibility":"Public","body":"original_request.query_params"},"external_var":false},{"html_id":"params(*params,&)-instance-method","name":"params","abstract":false,"args":[{"name":"params","external_name":"params","restriction":""}],"args_string":"(*params, &)","args_html":"(*params, &)","location":{"filename":"src/route.cr","line_number":204,"url":"https://github.com/jgaskins/armature/blob/v0.4.3/src/route.cr#L204"},"def":{"name":"params","args":[{"name":"params","external_name":"params","restriction":""}],"splat_index":0,"yields":1,"block_arity":1,"visibility":"Public","body":"if handled?\n  return\nend\nif !params.all? do |param|\n  original_request.query_params.has_key?(param)\nend\n  return\nend\n\nbegin\n  yield params.map do |key|\n    original_request.query_params[key]\n  end\nensure\n  handled!\nend\n"},"external_var":false},{"html_id":"patch(capture:Symbol,&)-instance-method","name":"patch","abstract":false,"args":[{"name":"capture","external_name":"capture","restriction":"Symbol"}],"args_string":"(capture : Symbol, &)","args_html":"(capture : Symbol, &)","location":{"filename":"src/route.cr","line_number":77,"url":"https://github.com/jgaskins/armature/blob/v0.4.3/src/route.cr#L77"},"def":{"name":"patch","args":[{"name":"capture","external_name":"capture","restriction":"Symbol"}],"yields":1,"block_arity":1,"visibility":"Public","body":"is(capture) do |capture|\n  patch do\n    yield capture\n  end\nend"},"external_var":false},{"html_id":"patch(path:String,&)-instance-method","name":"patch","abstract":false,"args":[{"name":"path","external_name":"path","restriction":"String"}],"args_string":"(path : String, &)","args_html":"(path : String, &)","location":{"filename":"src/route.cr","line_number":77,"url":"https://github.com/jgaskins/armature/blob/v0.4.3/src/route.cr#L77"},"def":{"name":"patch","args":[{"name":"path","external_name":"path","restriction":"String"}],"yields":0,"block_arity":0,"visibility":"Public","body":"is(path) do\n  patch do\n    yield\n  end\nend"},"external_var":false},{"html_id":"patch(&)-instance-method","name":"patch","abstract":false,"location":{"filename":"src/route.cr","line_number":77,"url":"https://github.com/jgaskins/armature/blob/v0.4.3/src/route.cr#L77"},"def":{"name":"patch","yields":0,"block_arity":0,"visibility":"Public","body":"if handled?\n  return\nend\n\nif original_request.method == \"PATCH\"\n  begin\n    yield\n  ensure\n    handled!\n  end\nend\n"},"external_var":false},{"html_id":"path(*args,**options)-instance-method","name":"path","abstract":false,"args":[{"name":"args","external_name":"args","restriction":""}],"args_string":"(*args, **options)","args_html":"(*args, **options)","location":{"filename":"src/route.cr","line_number":25,"url":"https://github.com/jgaskins/armature/blob/v0.4.3/src/route.cr#L25"},"def":{"name":"path","args":[{"name":"args","external_name":"args","restriction":""}],"double_splat":{"name":"options","external_name":"options","restriction":""},"splat_index":0,"visibility":"Public","body":"original_request.path(*args, **options)"},"external_var":false},{"html_id":"path(*args,**options,&)-instance-method","name":"path","abstract":false,"args":[{"name":"args","external_name":"args","restriction":""}],"args_string":"(*args, **options, &)","args_html":"(*args, **options, &)","location":{"filename":"src/route.cr","line_number":25,"url":"https://github.com/jgaskins/armature/blob/v0.4.3/src/route.cr#L25"},"def":{"name":"path","args":[{"name":"args","external_name":"args","restriction":""}],"double_splat":{"name":"options","external_name":"options","restriction":""},"splat_index":0,"yields":1,"block_arity":1,"visibility":"Public","body":"original_request.path(*args, **options) do |*yield_args|\n  yield *yield_args\nend"},"external_var":false},{"html_id":"post(capture:Symbol,&)-instance-method","name":"post","abstract":false,"args":[{"name":"capture","external_name":"capture","restriction":"Symbol"}],"args_string":"(capture : Symbol, &)","args_html":"(capture : Symbol, &)","location":{"filename":"src/route.cr","line_number":77,"url":"https://github.com/jgaskins/armature/blob/v0.4.3/src/route.cr#L77"},"def":{"name":"post","args":[{"name":"capture","external_name":"capture","restriction":"Symbol"}],"yields":1,"block_arity":1,"visibility":"Public","body":"is(capture) do |capture|\n  post do\n    yield capture\n  end\nend"},"external_var":false},{"html_id":"post(path:String,&)-instance-method","name":"post","abstract":false,"args":[{"name":"path","external_name":"path","restriction":"String"}],"args_string":"(path : String, &)","args_html":"(path : String, &)","location":{"filename":"src/route.cr","line_number":77,"url":"https://github.com/jgaskins/armature/blob/v0.4.3/src/route.cr#L77"},"def":{"name":"post","args":[{"name":"path","external_name":"path","restriction":"String"}],"yields":0,"block_arity":0,"visibility":"Public","body":"is(path) do\n  post do\n    yield\n  end\nend"},"external_var":false},{"html_id":"post(&)-instance-method","name":"post","abstract":false,"location":{"filename":"src/route.cr","line_number":77,"url":"https://github.com/jgaskins/armature/blob/v0.4.3/src/route.cr#L77"},"def":{"name":"post","yields":0,"block_arity":0,"visibility":"Public","body":"if handled?\n  return\nend\n\nif original_request.method == \"POST\"\n  begin\n    yield\n  ensure\n    handled!\n  end\nend\n"},"external_var":false},{"html_id":"put(capture:Symbol,&)-instance-method","name":"put","abstract":false,"args":[{"name":"capture","external_name":"capture","restriction":"Symbol"}],"args_string":"(capture : Symbol, &)","args_html":"(capture : Symbol, &)","location":{"filename":"src/route.cr","line_number":77,"url":"https://github.com/jgaskins/armature/blob/v0.4.3/src/route.cr#L77"},"def":{"name":"put","args":[{"name":"capture","external_name":"capture","restriction":"Symbol"}],"yields":1,"block_arity":1,"visibility":"Public","body":"is(capture) do |capture|\n  put do\n    yield capture\n  end\nend"},"external_var":false},{"html_id":"put(path:String,&)-instance-method","name":"put","abstract":false,"args":[{"name":"path","external_name":"path","restriction":"String"}],"args_string":"(path : String, &)","args_html":"(path : String, &)","location":{"filename":"src/route.cr","line_number":77,"url":"https://github.com/jgaskins/armature/blob/v0.4.3/src/route.cr#L77"},"def":{"name":"put","args":[{"name":"path","external_name":"path","restriction":"String"}],"yields":0,"block_arity":0,"visibility":"Public","body":"is(path) do\n  put do\n    yield\n  end\nend"},"external_var":false},{"html_id":"put(&)-instance-method","name":"put","abstract":false,"location":{"filename":"src/route.cr","line_number":77,"url":"https://github.com/jgaskins/armature/blob/v0.4.3/src/route.cr#L77"},"def":{"name":"put","yields":0,"block_arity":0,"visibility":"Public","body":"if handled?\n  return\nend\n\nif original_request.method == \"PUT\"\n  begin\n    yield\n  ensure\n    handled!\n  end\nend\n"},"external_var":false},{"html_id":"response:Response-instance-method","name":"response","abstract":false,"location":{"filename":"src/route.cr","line_number":29,"url":"https://github.com/jgaskins/armature/blob/v0.4.3/src/route.cr#L29"},"def":{"name":"response","return_type":"Response","visibility":"Public","body":"if (__temp_178 = @response).nil?\n  @response = (context.armature_response)\nelse\n  __temp_178\nend"},"external_var":false},{"html_id":"root(&)-instance-method","name":"root","abstract":false,"location":{"filename":"src/route.cr","line_number":47,"url":"https://github.com/jgaskins/armature/blob/v0.4.3/src/route.cr#L47"},"def":{"name":"root","yields":0,"block_arity":0,"visibility":"Public","body":"if handled?\n  return\nend\n\nis do\n  yield\nend\n"},"external_var":false},{"html_id":"session:Session-instance-method","name":"session","abstract":false,"location":{"filename":"src/route.cr","line_number":30,"url":"https://github.com/jgaskins/armature/blob/v0.4.3/src/route.cr#L30"},"def":{"name":"session","return_type":"Session","visibility":"Public","body":"if (__temp_179 = @session).nil?\n  @session = (context.session)\nelse\n  __temp_179\nend"},"external_var":false},{"html_id":"url:URI-instance-method","name":"url","abstract":false,"location":{"filename":"src/route.cr","line_number":229,"url":"https://github.com/jgaskins/armature/blob/v0.4.3/src/route.cr#L229"},"def":{"name":"url","return_type":"URI","visibility":"Public","body":"@uri || (@uri = URI.parse(\"https://#{original_request.host_with_port}/#{original_request.path}\"))"},"external_var":false}],"macros":[{"html_id":"handle_method(*methods)-macro","name":"handle_method","abstract":false,"args":[{"name":"methods","external_name":"methods","restriction":""}],"args_string":"(*methods)","args_html":"(*methods)","location":{"filename":"src/route.cr","line_number":53,"url":"https://github.com/jgaskins/armature/blob/v0.4.3/src/route.cr#L53"},"def":{"name":"handle_method","args":[{"name":"methods","external_name":"methods","restriction":""}],"splat_index":0,"visibility":"Public","body":"        \n{% for method in methods %}\n          def {{ method.id.downcase }}\n            return if handled?\n\n            if original_request.method == {{ method.stringify.upcase }}\n              begin\n                yield\n              ensure\n                handled!\n              end\n            end\n          end\n\n          def {{ method.id.downcase }}(capture : Symbol)\n            is(capture) { |capture| {{ method.id.downcase }} { yield capture } }\n          end\n\n          def {{ method.id.downcase }}(path : String)\n            is(path) { {{ method.id.downcase }} { yield } }\n          end\n        {% end %}\n\n      \n"}}]},{"html_id":"armature/Armature/Route/RequestHandled","path":"Armature/Route/RequestHandled.html","kind":"class","full_name":"Armature::Route::RequestHandled","name":"RequestHandled","abstract":false,"superclass":{"html_id":"armature/Exception","kind":"class","full_name":"Exception","name":"Exception"},"ancestors":[{"html_id":"armature/Exception","kind":"class","full_name":"Exception","name":"Exception"},{"html_id":"armature/Reference","kind":"class","full_name":"Reference","name":"Reference"},{"html_id":"armature/Object","kind":"class","full_name":"Object","name":"Object"}],"locations":[{"filename":"src/route.cr","line_number":289,"url":"https://github.com/jgaskins/armature/blob/v0.4.3/src/route.cr#L289"}],"repository_name":"armature","program":false,"enum":false,"alias":false,"const":false,"namespace":{"html_id":"armature/Armature/Route","kind":"module","full_name":"Armature::Route","name":"Route"}},{"html_id":"armature/Armature/Route/Response","path":"Armature/Route/Response.html","kind":"class","full_name":"Armature::Route::Response","name":"Response","abstract":false,"superclass":{"html_id":"armature/IO","kind":"class","full_name":"IO","name":"IO"},"ancestors":[{"html_id":"armature/IO","kind":"class","full_name":"IO","name":"IO"},{"html_id":"armature/Reference","kind":"class","full_name":"Reference","name":"Reference"},{"html_id":"armature/Object","kind":"class","full_name":"Object","name":"Object"}],"locations":[{"filename":"src/route.cr","line_number":246,"url":"https://github.com/jgaskins/armature/blob/v0.4.3/src/route.cr#L246"}],"repository_name":"armature","program":false,"enum":false,"alias":false,"const":false,"namespace":{"html_id":"armature/Armature/Route","kind":"module","full_name":"Armature::Route","name":"Route"},"constructors":[{"html_id":"new(context:HTTP::Server::Context)-class-method","name":"new","abstract":false,"args":[{"name":"context","external_name":"context","restriction":"HTTP::Server::Context"}],"args_string":"(context : HTTP::Server::Context)","args_html":"(context : HTTP::Server::Context)","location":{"filename":"src/route.cr","line_number":251,"url":"https://github.com/jgaskins/armature/blob/v0.4.3/src/route.cr#L251"},"def":{"name":"new","args":[{"name":"context","external_name":"context","restriction":"HTTP::Server::Context"}],"visibility":"Public","body":"new(context.response)"},"external_var":false},{"html_id":"new(response:HTTP::Server::Response)-class-method","name":"new","abstract":false,"args":[{"name":"response","external_name":"response","restriction":"::HTTP::Server::Response"}],"args_string":"(response : HTTP::Server::Response)","args_html":"(response : HTTP::Server::Response)","location":{"filename":"src/route.cr","line_number":255,"url":"https://github.com/jgaskins/armature/blob/v0.4.3/src/route.cr#L255"},"def":{"name":"new","args":[{"name":"response","external_name":"response","restriction":"::HTTP::Server::Response"}],"visibility":"Public","body":"_ = allocate\n_.initialize(response)\nif _.responds_to?(:finalize)\n  ::GC.add_finalizer(_)\nend\n_\n"},"external_var":false}],"instance_methods":[{"html_id":"headers(*args,**options)-instance-method","name":"headers","abstract":false,"args":[{"name":"args","external_name":"args","restriction":""}],"args_string":"(*args, **options)","args_html":"(*args, **options)","location":{"filename":"src/route.cr","line_number":249,"url":"https://github.com/jgaskins/armature/blob/v0.4.3/src/route.cr#L249"},"def":{"name":"headers","args":[{"name":"args","external_name":"args","restriction":""}],"double_splat":{"name":"options","external_name":"options","restriction":""},"splat_index":0,"visibility":"Public","body":"@response.headers(*args, **options)"},"external_var":false},{"html_id":"headers(*args,**options,&)-instance-method","name":"headers","abstract":false,"args":[{"name":"args","external_name":"args","restriction":""}],"args_string":"(*args, **options, &)","args_html":"(*args, **options, &)","location":{"filename":"src/route.cr","line_number":249,"url":"https://github.com/jgaskins/armature/blob/v0.4.3/src/route.cr#L249"},"def":{"name":"headers","args":[{"name":"args","external_name":"args","restriction":""}],"double_splat":{"name":"options","external_name":"options","restriction":""},"splat_index":0,"yields":1,"block_arity":1,"visibility":"Public","body":"@response.headers(*args, **options) do |*yield_args|\n  yield *yield_args\nend"},"external_var":false},{"html_id":"json(serializer)-instance-method","name":"json","abstract":false,"args":[{"name":"serializer","external_name":"serializer","restriction":""}],"args_string":"(serializer)","args_html":"(serializer)","location":{"filename":"src/route.cr","line_number":263,"url":"https://github.com/jgaskins/armature/blob/v0.4.3/src/route.cr#L263"},"def":{"name":"json","args":[{"name":"serializer","external_name":"serializer","restriction":""}],"visibility":"Public","body":"@response.headers[\"Content-Type\"] = \"application/json\"\nserializer.to_json(@response)\n"},"external_var":false},{"html_id":"json(**stuff)-instance-method","name":"json","abstract":false,"location":{"filename":"src/route.cr","line_number":268,"url":"https://github.com/jgaskins/armature/blob/v0.4.3/src/route.cr#L268"},"def":{"name":"json","double_splat":{"name":"stuff","external_name":"stuff","restriction":""},"visibility":"Public","body":"@response.headers[\"Content-Type\"] = \"application/json\"\nstuff.to_json(@response)\n"},"external_var":false},{"html_id":"output-instance-method","name":"output","abstract":false,"location":{"filename":"src/route.cr","line_number":281,"url":"https://github.com/jgaskins/armature/blob/v0.4.3/src/route.cr#L281"},"def":{"name":"output","visibility":"Public","body":"@response.output.as(IO::Buffered)"},"external_var":false},{"html_id":"read(*args,**options)-instance-method","name":"read","abstract":false,"args":[{"name":"args","external_name":"args","restriction":""}],"args_string":"(*args, **options)","args_html":"(*args, **options)","location":{"filename":"src/route.cr","line_number":249,"url":"https://github.com/jgaskins/armature/blob/v0.4.3/src/route.cr#L249"},"def":{"name":"read","args":[{"name":"args","external_name":"args","restriction":""}],"double_splat":{"name":"options","external_name":"options","restriction":""},"splat_index":0,"visibility":"Public","body":"@response.read(*args, **options)"},"external_var":false},{"html_id":"read(*args,**options,&)-instance-method","name":"read","abstract":false,"args":[{"name":"args","external_name":"args","restriction":""}],"args_string":"(*args, **options, &)","args_html":"(*args, **options, &)","location":{"filename":"src/route.cr","line_number":249,"url":"https://github.com/jgaskins/armature/blob/v0.4.3/src/route.cr#L249"},"def":{"name":"read","args":[{"name":"args","external_name":"args","restriction":""}],"double_splat":{"name":"options","external_name":"options","restriction":""},"splat_index":0,"yields":1,"block_arity":1,"visibility":"Public","body":"@response.read(*args, **options) do |*yield_args|\n  yield *yield_args\nend"},"external_var":false},{"html_id":"redirect(path:String|URI,status:HTTP::Status=:see_other)-instance-method","name":"redirect","abstract":false,"args":[{"name":"path","external_name":"path","restriction":"String | URI"},{"name":"status","default_value":":see_other","external_name":"status","restriction":"HTTP::Status"}],"args_string":"(path : String | URI, status : HTTP::Status = :see_other)","args_html":"(path : String | URI, status : HTTP::Status = <span class=\"n\">:see_other</span>)","location":{"filename":"src/route.cr","line_number":258,"url":"https://github.com/jgaskins/armature/blob/v0.4.3/src/route.cr#L258"},"def":{"name":"redirect","args":[{"name":"path","external_name":"path","restriction":"String | URI"},{"name":"status","default_value":":see_other","external_name":"status","restriction":"HTTP::Status"}],"visibility":"Public","body":"self.status = status\n@response.headers[\"Location\"] = path.to_s\n"},"external_var":false},{"html_id":"status(*args,**options)-instance-method","name":"status","abstract":false,"args":[{"name":"args","external_name":"args","restriction":""}],"args_string":"(*args, **options)","args_html":"(*args, **options)","location":{"filename":"src/route.cr","line_number":249,"url":"https://github.com/jgaskins/armature/blob/v0.4.3/src/route.cr#L249"},"def":{"name":"status","args":[{"name":"args","external_name":"args","restriction":""}],"double_splat":{"name":"options","external_name":"options","restriction":""},"splat_index":0,"visibility":"Public","body":"@response.status(*args, **options)"},"external_var":false},{"html_id":"status(*args,**options,&)-instance-method","name":"status","abstract":false,"args":[{"name":"args","external_name":"args","restriction":""}],"args_string":"(*args, **options, &)","args_html":"(*args, **options, &)","location":{"filename":"src/route.cr","line_number":249,"url":"https://github.com/jgaskins/armature/blob/v0.4.3/src/route.cr#L249"},"def":{"name":"status","args":[{"name":"args","external_name":"args","restriction":""}],"double_splat":{"name":"options","external_name":"options","restriction":""},"splat_index":0,"yields":1,"block_arity":1,"visibility":"Public","body":"@response.status(*args, **options) do |*yield_args|\n  yield *yield_args\nend"},"external_var":false},{"html_id":"status=(status:HTTP::Status)-instance-method","name":"status=","abstract":false,"args":[{"name":"status","external_name":"status","restriction":"HTTP::Status"}],"args_string":"(status : HTTP::Status)","args_html":"(status : HTTP::Status)","location":{"filename":"src/route.cr","line_number":273,"url":"https://github.com/jgaskins/armature/blob/v0.4.3/src/route.cr#L273"},"def":{"name":"status=","args":[{"name":"status","external_name":"status","restriction":"HTTP::Status"}],"visibility":"Public","body":"@response.status = status"},"external_var":false},{"html_id":"write(slice:Bytes):Nil-instance-method","name":"write","doc":"Writes the contents of *slice* into this `IO`.\n\n```\nio = IO::Memory.new\nslice = Bytes.new(4) { |i| ('a'.ord + i).to_u8 }\nio.write(slice)\nio.to_s # => \"abcd\"\n```","summary":"<p>Writes the contents of <em>slice</em> into this <code>IO</code>.</p>","abstract":false,"args":[{"name":"slice","external_name":"slice","restriction":"Bytes"}],"args_string":"(slice : Bytes) : Nil","args_html":"(slice : Bytes) : Nil","location":{"filename":"src/route.cr","line_number":277,"url":"https://github.com/jgaskins/armature/blob/v0.4.3/src/route.cr#L277"},"def":{"name":"write","args":[{"name":"slice","external_name":"slice","restriction":"Bytes"}],"return_type":"Nil","visibility":"Public","body":"@response.write(slice)"},"external_var":false}]},{"html_id":"armature/Armature/Route/UnauthenticatedException","path":"Armature/Route/UnauthenticatedException.html","kind":"class","full_name":"Armature::Route::UnauthenticatedException","name":"UnauthenticatedException","abstract":false,"superclass":{"html_id":"armature/Exception","kind":"class","full_name":"Exception","name":"Exception"},"ancestors":[{"html_id":"armature/Exception","kind":"class","full_name":"Exception","name":"Exception"},{"html_id":"armature/Reference","kind":"class","full_name":"Reference","name":"Reference"},{"html_id":"armature/Object","kind":"class","full_name":"Object","name":"Object"}],"locations":[{"filename":"src/route.cr","line_number":286,"url":"https://github.com/jgaskins/armature/blob/v0.4.3/src/route.cr#L286"}],"repository_name":"armature","program":false,"enum":false,"alias":false,"const":false,"namespace":{"html_id":"armature/Armature/Route","kind":"module","full_name":"Armature::Route","name":"Route"}}]},{"html_id":"armature/Armature/Session","path":"Armature/Session.html","kind":"class","full_name":"Armature::Session","name":"Session","abstract":true,"superclass":{"html_id":"armature/Reference","kind":"class","full_name":"Reference","name":"Reference"},"ancestors":[{"html_id":"armature/Reference","kind":"class","full_name":"Reference","name":"Reference"},{"html_id":"armature/Object","kind":"class","full_name":"Object","name":"Object"}],"locations":[{"filename":"src/redis_session.cr","line_number":9,"url":"https://github.com/jgaskins/armature/blob/v0.4.3/src/redis_session.cr#L9"},{"filename":"src/session.cr","line_number":4,"url":"https://github.com/jgaskins/armature/blob/v0.4.3/src/session.cr#L4"}],"repository_name":"armature","program":false,"enum":false,"alias":false,"const":false,"subclasses":[{"html_id":"armature/Armature/BlankSession","kind":"class","full_name":"Armature::BlankSession","name":"BlankSession"},{"html_id":"armature/Armature/Session/RedisStore/Session","kind":"class","full_name":"Armature::Session::RedisStore::Session","name":"Session"}],"namespace":{"html_id":"armature/Armature","kind":"module","full_name":"Armature","name":"Armature"},"constructors":[{"html_id":"new(store:Store,cookies:HTTP::Cookies)-class-method","name":"new","abstract":false,"args":[{"name":"store","external_name":"store","restriction":"Store"},{"name":"cookies","external_name":"cookies","restriction":"HTTP::Cookies"}],"args_string":"(store : Store, cookies : HTTP::Cookies)","args_html":"(store : <a href=\"../Armature/Session/Store.html\">Store</a>, cookies : HTTP::Cookies)","location":{"filename":"src/session.cr","line_number":5,"url":"https://github.com/jgaskins/armature/blob/v0.4.3/src/session.cr#L5"},"def":{"name":"new","args":[{"name":"store","external_name":"store","restriction":"Store"},{"name":"cookies","external_name":"cookies","restriction":"HTTP::Cookies"}],"visibility":"Public","body":"_ = allocate\n_.initialize(store, cookies)\nif _.responds_to?(:finalize)\n  ::GC.add_finalizer(_)\nend\n_\n"},"external_var":false}],"instance_methods":[{"html_id":"[](key:String)-instance-method","name":"[]","abstract":true,"args":[{"name":"key","external_name":"key","restriction":"String"}],"args_string":"(key : String)","args_html":"(key : String)","location":{"filename":"src/session.cr","line_number":8,"url":"https://github.com/jgaskins/armature/blob/v0.4.3/src/session.cr#L8"},"def":{"name":"[]","args":[{"name":"key","external_name":"key","restriction":"String"}],"visibility":"Public","body":""},"external_var":false},{"html_id":"[]=(key:String,value:String)-instance-method","name":"[]=","abstract":true,"args":[{"name":"key","external_name":"key","restriction":"String"},{"name":"value","external_name":"value","restriction":"String"}],"args_string":"(key : String, value : String)","args_html":"(key : String, value : String)","location":{"filename":"src/session.cr","line_number":10,"url":"https://github.com/jgaskins/armature/blob/v0.4.3/src/session.cr#L10"},"def":{"name":"[]=","args":[{"name":"key","external_name":"key","restriction":"String"},{"name":"value","external_name":"value","restriction":"String"}],"visibility":"Public","body":""},"external_var":false},{"html_id":"delete(key:String)-instance-method","name":"delete","abstract":true,"args":[{"name":"key","external_name":"key","restriction":"String"}],"args_string":"(key : String)","args_html":"(key : String)","location":{"filename":"src/session.cr","line_number":12,"url":"https://github.com/jgaskins/armature/blob/v0.4.3/src/session.cr#L12"},"def":{"name":"delete","args":[{"name":"key","external_name":"key","restriction":"String"}],"visibility":"Public","body":""},"external_var":false}],"types":[{"html_id":"armature/Armature/Session/RedisStore","path":"Armature/Session/RedisStore.html","kind":"class","full_name":"Armature::Session::RedisStore","name":"RedisStore","abstract":false,"superclass":{"html_id":"armature/Armature/Session/Store","kind":"class","full_name":"Armature::Session::Store","name":"Store"},"ancestors":[{"html_id":"armature/Armature/Session/Store","kind":"class","full_name":"Armature::Session::Store","name":"Store"},{"html_id":"armature/HTTP/Handler","kind":"module","full_name":"HTTP::Handler","name":"Handler"},{"html_id":"armature/Reference","kind":"class","full_name":"Reference","name":"Reference"},{"html_id":"armature/Object","kind":"class","full_name":"Object","name":"Object"}],"locations":[{"filename":"src/redis_session.cr","line_number":10,"url":"https://github.com/jgaskins/armature/blob/v0.4.3/src/redis_session.cr#L10"}],"repository_name":"armature","program":false,"enum":false,"alias":false,"const":false,"namespace":{"html_id":"armature/Armature/Session","kind":"class","full_name":"Armature::Session","name":"Session"},"constructors":[{"html_id":"new(key:String,redis:Redis::Client=Redis::Client.new,expiration:Time::Span|Nil=2.weeks,log:Log=Log.for(\"armature.session\"))-class-method","name":"new","abstract":false,"args":[{"name":"key","external_name":"key","restriction":"String"},{"name":"redis","default_value":"Redis::Client.new","external_name":"redis","restriction":"::Redis::Client"},{"name":"expiration","default_value":"2.weeks","external_name":"expiration","restriction":"::Time::Span | ::Nil"},{"name":"log","default_value":"Log.for(\"armature.session\")","external_name":"log","restriction":"::Log"}],"args_string":"(key : String, redis : Redis::Client = Redis::Client.new, expiration : Time::Span | Nil = 2.weeks, log : Log = Log.for(\"armature.session\"))","args_html":"(key : String, redis : Redis::Client = <span class=\"t\">Redis</span><span class=\"t\">::</span><span class=\"t\">Client</span>.new, expiration : Time::Span | Nil = <span class=\"n\">2</span>.weeks, log : Log = <span class=\"t\">Log</span>.<span class=\"k\">for</span>(<span class=\"s\">&quot;armature.session&quot;</span>))","location":{"filename":"src/redis_session.cr","line_number":15,"url":"https://github.com/jgaskins/armature/blob/v0.4.3/src/redis_session.cr#L15"},"def":{"name":"new","args":[{"name":"key","external_name":"key","restriction":"String"},{"name":"redis","default_value":"Redis::Client.new","external_name":"redis","restriction":"::Redis::Client"},{"name":"expiration","default_value":"2.weeks","external_name":"expiration","restriction":"::Time::Span | ::Nil"},{"name":"log","default_value":"Log.for(\"armature.session\")","external_name":"log","restriction":"::Log"}],"visibility":"Public","body":"_ = allocate\n_.initialize(key, redis, expiration, log)\nif _.responds_to?(:finalize)\n  ::GC.add_finalizer(_)\nend\n_\n"},"external_var":false}],"instance_methods":[{"html_id":"call(context:HTTP::Server::Context)-instance-method","name":"call","abstract":false,"args":[{"name":"context","external_name":"context","restriction":"HTTP::Server::Context"}],"args_string":"(context : HTTP::Server::Context)","args_html":"(context : HTTP::Server::Context)","location":{"filename":"src/redis_session.cr","line_number":24,"url":"https://github.com/jgaskins/armature/blob/v0.4.3/src/redis_session.cr#L24"},"def":{"name":"call","args":[{"name":"context","external_name":"context","restriction":"HTTP::Server::Context"}],"visibility":"Public","body":"session = Session.new(self, context.request.cookies)\ncontext.session = session\n\nif session_id = context.request.cookies[@key]?.try(&.value)\nelse\n  session_id = UUID.random.to_s\nend\n\ncall_next(context)\n\nif session.modified? || !session.new?\n  context.response.cookies << (HTTP::Cookie.new(@key, session_id, expires: @expiration.try(&.from_now)))\n  save(\"#{@key}-#{session_id}\", session.as(Session))\nend\n"},"external_var":false},{"html_id":"key:String-instance-method","name":"key","abstract":false,"location":{"filename":"src/redis_session.cr","line_number":11,"url":"https://github.com/jgaskins/armature/blob/v0.4.3/src/redis_session.cr#L11"},"def":{"name":"key","visibility":"Public","body":"@key"},"external_var":false},{"html_id":"load(key:String):Hash(String,JSON::Any)-instance-method","name":"load","abstract":false,"args":[{"name":"key","external_name":"key","restriction":"String"}],"args_string":"(key : String) : Hash(String, JSON::Any)","args_html":"(key : String) : Hash(String, JSON::Any)","location":{"filename":"src/redis_session.cr","line_number":40,"url":"https://github.com/jgaskins/armature/blob/v0.4.3/src/redis_session.cr#L40"},"def":{"name":"load","args":[{"name":"key","external_name":"key","restriction":"String"}],"return_type":"Hash(String, JSON::Any)","visibility":"Public","body":"value = @redis.get(key)\n@log.debug(&.emit(\"GET #{key}\", value: value))\nvalue = JSON.parse(value || \"{}\")\nif value.raw.nil?\n  value = JSON::Any.new({} of String => JSON::Any)\nend\n\nvalue.as_h\n"},"external_var":false},{"html_id":"save(key:String,session:Session)-instance-method","name":"save","abstract":false,"args":[{"name":"key","external_name":"key","restriction":"String"},{"name":"session","external_name":"session","restriction":"Session"}],"args_string":"(key : String, session : Session)","args_html":"(key : String, session : <a href=\"../../Armature/Session/RedisStore/Session.html\">Session</a>)","location":{"filename":"src/redis_session.cr","line_number":51,"url":"https://github.com/jgaskins/armature/blob/v0.4.3/src/redis_session.cr#L51"},"def":{"name":"save","args":[{"name":"key","external_name":"key","restriction":"String"},{"name":"session","external_name":"session","restriction":"Session"}],"visibility":"Public","body":"@redis.set(key, session.json, ex: @expiration)"},"external_var":false}],"types":[{"html_id":"armature/Armature/Session/RedisStore/Session","path":"Armature/Session/RedisStore/Session.html","kind":"class","full_name":"Armature::Session::RedisStore::Session","name":"Session","abstract":false,"superclass":{"html_id":"armature/Armature/Session","kind":"class","full_name":"Armature::Session","name":"Session"},"ancestors":[{"html_id":"armature/Armature/Session","kind":"class","full_name":"Armature::Session","name":"Session"},{"html_id":"armature/Reference","kind":"class","full_name":"Reference","name":"Reference"},{"html_id":"armature/Object","kind":"class","full_name":"Object","name":"Object"}],"locations":[{"filename":"src/redis_session.cr","line_number":55,"url":"https://github.com/jgaskins/armature/blob/v0.4.3/src/redis_session.cr#L55"}],"repository_name":"armature","program":false,"enum":false,"alias":false,"const":false,"namespace":{"html_id":"armature/Armature/Session/RedisStore","kind":"class","full_name":"Armature::Session::RedisStore","name":"RedisStore"},"instance_methods":[{"html_id":"[](key:String)-instance-method","name":"[]","abstract":false,"args":[{"name":"key","external_name":"key","restriction":"String"}],"args_string":"(key : String)","args_html":"(key : String)","location":{"filename":"src/redis_session.cr","line_number":67,"url":"https://github.com/jgaskins/armature/blob/v0.4.3/src/redis_session.cr#L67"},"def":{"name":"[]","args":[{"name":"key","external_name":"key","restriction":"String"}],"visibility":"Public","body":"data[key]"},"external_var":false},{"html_id":"[]=(key:String,value:Hash(String,JSON::Any))-instance-method","name":"[]=","abstract":false,"args":[{"name":"key","external_name":"key","restriction":"String"},{"name":"value","external_name":"value","restriction":"Hash(String, JSON::Any)"}],"args_string":"(key : String, value : Hash(String, JSON::Any))","args_html":"(key : String, value : Hash(String, JSON::Any))","location":{"filename":"src/redis_session.cr","line_number":79,"url":"https://github.com/jgaskins/armature/blob/v0.4.3/src/redis_session.cr#L79"},"def":{"name":"[]=","args":[{"name":"key","external_name":"key","restriction":"String"},{"name":"value","external_name":"value","restriction":"Hash(String, JSON::Any)"}],"visibility":"Public","body":"self[key] = JSON::Any.new(value)"},"external_var":false},{"html_id":"[]=(key:String,value:Hash)-instance-method","name":"[]=","abstract":false,"args":[{"name":"key","external_name":"key","restriction":"String"},{"name":"value","external_name":"value","restriction":"Hash"}],"args_string":"(key : String, value : Hash)","args_html":"(key : String, value : Hash)","location":{"filename":"src/redis_session.cr","line_number":75,"url":"https://github.com/jgaskins/armature/blob/v0.4.3/src/redis_session.cr#L75"},"def":{"name":"[]=","args":[{"name":"key","external_name":"key","restriction":"String"},{"name":"value","external_name":"value","restriction":"Hash"}],"visibility":"Public","body":"self[key] = value.transform_values do |value|\n  JSON::Any.new(value)\nend"},"external_var":false},{"html_id":"[]=(key:String,value:JSON::Any::Type)-instance-method","name":"[]=","abstract":false,"args":[{"name":"key","external_name":"key","restriction":"String"},{"name":"value","external_name":"value","restriction":"JSON::Any::Type"}],"args_string":"(key : String, value : JSON::Any::Type)","args_html":"(key : String, value : JSON::Any::Type)","location":{"filename":"src/redis_session.cr","line_number":83,"url":"https://github.com/jgaskins/armature/blob/v0.4.3/src/redis_session.cr#L83"},"def":{"name":"[]=","args":[{"name":"key","external_name":"key","restriction":"String"},{"name":"value","external_name":"value","restriction":"JSON::Any::Type"}],"visibility":"Public","body":"self[key] = JSON::Any.new(value)"},"external_var":false},{"html_id":"[]=(key:String,value:Int)-instance-method","name":"[]=","abstract":false,"args":[{"name":"key","external_name":"key","restriction":"String"},{"name":"value","external_name":"value","restriction":"Int"}],"args_string":"(key : String, value : Int)","args_html":"(key : String, value : Int)","location":{"filename":"src/redis_session.cr","line_number":87,"url":"https://github.com/jgaskins/armature/blob/v0.4.3/src/redis_session.cr#L87"},"def":{"name":"[]=","args":[{"name":"key","external_name":"key","restriction":"String"},{"name":"value","external_name":"value","restriction":"Int"}],"visibility":"Public","body":"self[key] = JSON::Any.new(value.to_i64)"},"external_var":false},{"html_id":"[]=(key:String,value:JSON::Any)-instance-method","name":"[]=","abstract":false,"args":[{"name":"key","external_name":"key","restriction":"String"},{"name":"value","external_name":"value","restriction":"JSON::Any"}],"args_string":"(key : String, value : JSON::Any)","args_html":"(key : String, value : JSON::Any)","location":{"filename":"src/redis_session.cr","line_number":91,"url":"https://github.com/jgaskins/armature/blob/v0.4.3/src/redis_session.cr#L91"},"def":{"name":"[]=","args":[{"name":"key","external_name":"key","restriction":"String"},{"name":"value","external_name":"value","restriction":"JSON::Any"}],"visibility":"Public","body":"data[key] = value\n@modified = true\n"},"external_var":false},{"html_id":"[]?(key:String)-instance-method","name":"[]?","abstract":false,"args":[{"name":"key","external_name":"key","restriction":"String"}],"args_string":"(key : String)","args_html":"(key : String)","location":{"filename":"src/redis_session.cr","line_number":71,"url":"https://github.com/jgaskins/armature/blob/v0.4.3/src/redis_session.cr#L71"},"def":{"name":"[]?","args":[{"name":"key","external_name":"key","restriction":"String"}],"visibility":"Public","body":"data[key]?"},"external_var":false},{"html_id":"delete(key:String)-instance-method","name":"delete","abstract":false,"args":[{"name":"key","external_name":"key","restriction":"String"}],"args_string":"(key : String)","args_html":"(key : String)","location":{"filename":"src/redis_session.cr","line_number":96,"url":"https://github.com/jgaskins/armature/blob/v0.4.3/src/redis_session.cr#L96"},"def":{"name":"delete","args":[{"name":"key","external_name":"key","restriction":"String"}],"visibility":"Public","body":"if data.has_key?(key)\n  data.delete(key)\n  @modified = true\nend"},"external_var":false},{"html_id":"json-instance-method","name":"json","abstract":false,"location":{"filename":"src/redis_session.cr","line_number":103,"url":"https://github.com/jgaskins/armature/blob/v0.4.3/src/redis_session.cr#L103"},"def":{"name":"json","visibility":"Public","body":"@data.to_json"},"external_var":false},{"html_id":"modified?:Bool-instance-method","name":"modified?","abstract":false,"location":{"filename":"src/redis_session.cr","line_number":56,"url":"https://github.com/jgaskins/armature/blob/v0.4.3/src/redis_session.cr#L56"},"def":{"name":"modified?","return_type":"Bool","visibility":"Public","body":"@modified"},"external_var":false},{"html_id":"new?-instance-method","name":"new?","abstract":false,"location":{"filename":"src/redis_session.cr","line_number":107,"url":"https://github.com/jgaskins/armature/blob/v0.4.3/src/redis_session.cr#L107"},"def":{"name":"new?","visibility":"Public","body":"cookie.nil? || data.empty?"},"external_var":false}],"types":[{"html_id":"armature/Armature/Session/RedisStore/Session/Data","path":"Armature/Session/RedisStore/Session/Data.html","kind":"alias","full_name":"Armature::Session::RedisStore::Session::Data","name":"Data","abstract":false,"locations":[{"filename":"src/redis_session.cr","line_number":57,"url":"https://github.com/jgaskins/armature/blob/v0.4.3/src/redis_session.cr#L57"}],"repository_name":"armature","program":false,"enum":false,"alias":true,"aliased":"Hash(String, JSON::Any)","aliased_html":"Hash(String, JSON::Any)","const":false,"namespace":{"html_id":"armature/Armature/Session/RedisStore/Session","kind":"class","full_name":"Armature::Session::RedisStore::Session","name":"Session"}}]}]},{"html_id":"armature/Armature/Session/Store","path":"Armature/Session/Store.html","kind":"class","full_name":"Armature::Session::Store","name":"Store","abstract":true,"superclass":{"html_id":"armature/Reference","kind":"class","full_name":"Reference","name":"Reference"},"ancestors":[{"html_id":"armature/HTTP/Handler","kind":"module","full_name":"HTTP::Handler","name":"Handler"},{"html_id":"armature/Reference","kind":"class","full_name":"Reference","name":"Reference"},{"html_id":"armature/Object","kind":"class","full_name":"Object","name":"Object"}],"locations":[{"filename":"src/session.cr","line_number":14,"url":"https://github.com/jgaskins/armature/blob/v0.4.3/src/session.cr#L14"}],"repository_name":"armature","program":false,"enum":false,"alias":false,"const":false,"included_modules":[{"html_id":"armature/HTTP/Handler","kind":"module","full_name":"HTTP::Handler","name":"Handler"}],"subclasses":[{"html_id":"armature/Armature/BlankSession/Store","kind":"class","full_name":"Armature::BlankSession::Store","name":"Store"},{"html_id":"armature/Armature/Session/RedisStore","kind":"class","full_name":"Armature::Session::RedisStore","name":"RedisStore"}],"namespace":{"html_id":"armature/Armature/Session","kind":"class","full_name":"Armature::Session","name":"Session"},"constructors":[{"html_id":"new(key:String)-class-method","name":"new","abstract":false,"args":[{"name":"key","external_name":"key","restriction":"::String"}],"args_string":"(key : String)","args_html":"(key : String)","location":{"filename":"src/session.cr","line_number":19,"url":"https://github.com/jgaskins/armature/blob/v0.4.3/src/session.cr#L19"},"def":{"name":"new","args":[{"name":"key","external_name":"key","restriction":"::String"}],"visibility":"Public","body":"_ = allocate\n_.initialize(key)\nif _.responds_to?(:finalize)\n  ::GC.add_finalizer(_)\nend\n_\n"},"external_var":false}],"instance_methods":[{"html_id":"key:String-instance-method","name":"key","abstract":false,"location":{"filename":"src/session.cr","line_number":17,"url":"https://github.com/jgaskins/armature/blob/v0.4.3/src/session.cr#L17"},"def":{"name":"key","return_type":"String","visibility":"Public","body":"@key"},"external_var":false}]}]},{"html_id":"armature/Armature/Template","path":"Armature/Template.html","kind":"module","full_name":"Armature::Template","name":"Template","abstract":false,"locations":[{"filename":"src/template.cr","line_number":8,"url":"https://github.com/jgaskins/armature/blob/v0.4.3/src/template.cr#L8"}],"repository_name":"armature","program":false,"enum":false,"alias":false,"const":false,"constants":[{"id":"DefaultBufferName","name":"DefaultBufferName","value":"\"__str__\""}],"extended_modules":[{"html_id":"armature/Armature/Template","kind":"module","full_name":"Armature::Template","name":"Template"}],"namespace":{"html_id":"armature/Armature","kind":"module","full_name":"Armature","name":"Armature"},"doc":"`Armature::Template` is very similar `ECR` (and is, in fact, derived from it),\nbut whereas `ECR` is designed to be flexible enough for any kind of output,\n`Armature::Template` is specific to HTML. It supports automatic sanitization\nfor HTML output within `<%= ... %>` blocks, but allows raw output using\n`<%== ... %>` blocks  note the `=` vs `==` distinction.","summary":"<p><code><a href=\"../Armature/Template.html\">Armature::Template</a></code> is very similar <code>ECR</code> (and is, in fact, derived from it), but whereas <code>ECR</code> is designed to be flexible enough for any kind of output, <code><a href=\"../Armature/Template.html\">Armature::Template</a></code> is specific to HTML.</p>","macros":[{"html_id":"def_to_s(filename)-macro","name":"def_to_s","doc":"Defines a `to_s(io)` method whose body is the ECR contained\nin *filename*, translated to Crystal code.\n\n```html\n# greeting.ecr\nHello <%= @name %>!\n```\n\n```\nrequire \"armature/template\"\n\nclass Greeting\n  def initialize(@name : String)\n  end\n\n  Armature::Template.def_to_s \"greeting.ecr\"\nend\n\nGreeting.new(\"World\").to_s # => \"Hello World!\"\n```\n\nThe macro basically translates the text inside the given file\nto Crystal code that appends to the IO:\n\n```\nclass Greeting\n  def to_s(io)\n    io << \"Hello \"\n    io << @name\n    io << '!'\n  end\nend\n```","summary":"<p>Defines a <code>to_s(io)</code> method whose body is the ECR contained in <em>filename</em>, translated to Crystal code.</p>","abstract":false,"args":[{"name":"filename","external_name":"filename","restriction":""}],"args_string":"(filename)","args_html":"(filename)","location":{"filename":"src/template.cr","line_number":46,"url":"https://github.com/jgaskins/armature/blob/v0.4.3/src/template.cr#L46"},"def":{"name":"def_to_s","args":[{"name":"filename","external_name":"filename","restriction":""}],"visibility":"Public","body":"    def to_s(__io__ : IO) : Nil\n      ::Armature::Template.embed \n{{ filename }}\n, \"__io__\"\n    \nend\n  \n"}},{"html_id":"embed(filename,io_name)-macro","name":"embed","doc":"Embeds an ECR file *filename* into the program and appends the content to\nan IO in the variable *io_name*.\n\nThe generated code is the result of translating the contents of\nthe ECR file to Crystal, a program that appends to an IO.\n\n```html\n# greeting.ecr\nHello <%= name %>!\n```\n\n```\nrequire \"ecr/macros\"\n\nname = \"World\"\n\nio = IO::Memory.new\nArmature::Template.embed \"greeting.ecr\", io\nio.to_s # => \"Hello World!\"\n```\n\nThe `Armature::Template.embed` line basically generates this Crystal code:\n\n```\nio << \"Hello \"\nHTML.escape name, io\nio << '!'\n```","summary":"<p>Embeds an ECR file <em>filename</em> into the program and appends the content to an IO in the variable <em>io_name</em>.</p>","abstract":false,"args":[{"name":"filename","external_name":"filename","restriction":""},{"name":"io_name","external_name":"io_name","restriction":""}],"args_string":"(filename, io_name)","args_html":"(filename, io_name)","location":{"filename":"src/template.cr","line_number":80,"url":"https://github.com/jgaskins/armature/blob/v0.4.3/src/template.cr#L80"},"def":{"name":"embed","args":[{"name":"filename","external_name":"filename","restriction":""},{"name":"io_name","external_name":"io_name","restriction":""}],"visibility":"Public","body":"    \n\\{\n{ run(\"armature/template/compile\", \n{{ filename }}\n, \n{{ io_name.id.stringify }}\n) }}\n  \n"}},{"html_id":"render(filename)-macro","name":"render","doc":"Embeds an ECR file *filename* into the program and renders it to a string.\n\nThe generated code is the result of translating the contents of\nthe ECR file to Crystal, a program that appends to an IO and returns a string.\n\n```html\n# greeting.ecr\nHello <%= name %>!\n```\n\n```\nrequire \"ecr/macros\"\n\nname = \"World\"\n\nrendered = Armature::Template.render \"greeting.ecr\"\nrendered # => \"Hello World!\"\n```\n\nThe `Armature::Template.render` basically generates this Crystal code:\n\n```\nString.build do |io|\n  io << \"Hello \"\n  HTML.escape name, io\n  io << '!'\nend\n```","summary":"<p>Embeds an ECR file <em>filename</em> into the program and renders it to a string.</p>","abstract":false,"args":[{"name":"filename","external_name":"filename","restriction":""}],"args_string":"(filename)","args_html":"(filename)","location":{"filename":"src/template.cr","line_number":112,"url":"https://github.com/jgaskins/armature/blob/v0.4.3/src/template.cr#L112"},"def":{"name":"render","args":[{"name":"filename","external_name":"filename","restriction":""}],"visibility":"Public","body":"    ::String.build do |\n%io\n|\n      ::Armature::Template.embed(\n{{ filename }}\n, \n%io\n)\n    \nend\n  \n"}}],"types":[{"html_id":"armature/Armature/Template/HTML","path":"Armature/Template/HTML.html","kind":"module","full_name":"Armature::Template::HTML","name":"HTML","abstract":false,"locations":[{"filename":"src/template.cr","line_number":121,"url":"https://github.com/jgaskins/armature/blob/v0.4.3/src/template.cr#L121"}],"repository_name":"armature","program":false,"enum":false,"alias":false,"const":false,"namespace":{"html_id":"armature/Armature/Template","kind":"module","full_name":"Armature::Template","name":"Template"},"doc":"`Armature::Template` uses `HTML::SanitizableValue` and `HTML::SafeValue` to\ndetermine whether to perform HTML sanitization on Crystal expressions within\n`<%= ... %>` blocks.","summary":"<p><code><a href=\"../../Armature/Template.html\">Armature::Template</a></code> uses <code><a href=\"../../Armature/Template/HTML/SanitizableValue.html\">HTML::SanitizableValue</a></code> and <code><a href=\"../../Armature/Template/HTML/SafeValue.html\">HTML::SafeValue</a></code> to determine whether to perform HTML sanitization on Crystal expressions within `&lt;%= ...</p>","types":[{"html_id":"armature/Armature/Template/HTML/SafeValue","path":"Armature/Template/HTML/SafeValue.html","kind":"struct","full_name":"Armature::Template::HTML::SafeValue(T)","name":"SafeValue","abstract":false,"superclass":{"html_id":"armature/Struct","kind":"struct","full_name":"Struct","name":"Struct"},"ancestors":[{"html_id":"armature/Struct","kind":"struct","full_name":"Struct","name":"Struct"},{"html_id":"armature/Value","kind":"struct","full_name":"Value","name":"Value"},{"html_id":"armature/Object","kind":"class","full_name":"Object","name":"Object"}],"locations":[{"filename":"src/template.cr","line_number":135,"url":"https://github.com/jgaskins/armature/blob/v0.4.3/src/template.cr#L135"}],"repository_name":"armature","program":false,"enum":false,"alias":false,"const":false,"namespace":{"html_id":"armature/Armature/Template/HTML","kind":"module","full_name":"Armature::Template::HTML","name":"HTML"},"constructors":[{"html_id":"new(value:T)-class-method","name":"new","abstract":false,"args":[{"name":"value","external_name":"value","restriction":"T"}],"args_string":"(value : T)","args_html":"(value : T)","location":{"filename":"src/template.cr","line_number":136,"url":"https://github.com/jgaskins/armature/blob/v0.4.3/src/template.cr#L136"},"def":{"name":"new","args":[{"name":"value","external_name":"value","restriction":"T"}],"visibility":"Public","body":"_ = SafeValue(T).allocate\n_.initialize(value)\nif _.responds_to?(:finalize)\n  ::GC.add_finalizer(_)\nend\n_\n"},"external_var":false}],"instance_methods":[{"html_id":"to_s(io)-instance-method","name":"to_s","abstract":false,"args":[{"name":"io","external_name":"io","restriction":""}],"args_string":"(io)","args_html":"(io)","location":{"filename":"src/template.cr","line_number":139,"url":"https://github.com/jgaskins/armature/blob/v0.4.3/src/template.cr#L139"},"def":{"name":"to_s","args":[{"name":"io","external_name":"io","restriction":""}],"visibility":"Public","body":"@value.to_s(io)"},"external_var":false}]},{"html_id":"armature/Armature/Template/HTML/SanitizableValue","path":"Armature/Template/HTML/SanitizableValue.html","kind":"struct","full_name":"Armature::Template::HTML::SanitizableValue(T)","name":"SanitizableValue","abstract":false,"superclass":{"html_id":"armature/Struct","kind":"struct","full_name":"Struct","name":"Struct"},"ancestors":[{"html_id":"armature/Struct","kind":"struct","full_name":"Struct","name":"Struct"},{"html_id":"armature/Value","kind":"struct","full_name":"Value","name":"Value"},{"html_id":"armature/Object","kind":"class","full_name":"Object","name":"Object"}],"locations":[{"filename":"src/template.cr","line_number":122,"url":"https://github.com/jgaskins/armature/blob/v0.4.3/src/template.cr#L122"}],"repository_name":"armature","program":false,"enum":false,"alias":false,"const":false,"namespace":{"html_id":"armature/Armature/Template/HTML","kind":"module","full_name":"Armature::Template::HTML","name":"HTML"},"constructors":[{"html_id":"new(value:T)-class-method","name":"new","abstract":false,"args":[{"name":"value","external_name":"value","restriction":"T"}],"args_string":"(value : T)","args_html":"(value : T)","location":{"filename":"src/template.cr","line_number":123,"url":"https://github.com/jgaskins/armature/blob/v0.4.3/src/template.cr#L123"},"def":{"name":"new","args":[{"name":"value","external_name":"value","restriction":"T"}],"visibility":"Public","body":"_ = SanitizableValue(T).allocate\n_.initialize(value)\nif _.responds_to?(:finalize)\n  ::GC.add_finalizer(_)\nend\n_\n"},"external_var":false}],"instance_methods":[{"html_id":"to_s(io)-instance-method","name":"to_s","abstract":false,"args":[{"name":"io","external_name":"io","restriction":""}],"args_string":"(io)","args_html":"(io)","location":{"filename":"src/template.cr","line_number":126,"url":"https://github.com/jgaskins/armature/blob/v0.4.3/src/template.cr#L126"},"def":{"name":"to_s","args":[{"name":"io","external_name":"io","restriction":""}],"visibility":"Public","body":"{% if T < ::Armature::Template::HTML::SafeValue %}\n          @value.to_s io\n        {% else %}\n          ::HTML.escape @value.to_s, io\n        {% end %}"},"external_var":false}]}]},{"html_id":"armature/Armature/Template/Lexer","path":"Armature/Template/Lexer.html","kind":"class","full_name":"Armature::Template::Lexer","name":"Lexer","abstract":false,"superclass":{"html_id":"armature/Reference","kind":"class","full_name":"Reference","name":"Reference"},"ancestors":[{"html_id":"armature/Reference","kind":"class","full_name":"Reference","name":"Reference"},{"html_id":"armature/Object","kind":"class","full_name":"Object","name":"Object"}],"locations":[{"filename":"src/template.cr","line_number":274,"url":"https://github.com/jgaskins/armature/blob/v0.4.3/src/template.cr#L274"}],"repository_name":"armature","program":false,"enum":false,"alias":false,"const":false,"namespace":{"html_id":"armature/Armature/Template","kind":"module","full_name":"Armature::Template","name":"Template"},"constructors":[{"html_id":"new(string)-class-method","name":"new","abstract":false,"args":[{"name":"string","external_name":"string","restriction":""}],"args_string":"(string)","args_html":"(string)","location":{"filename":"src/template.cr","line_number":302,"url":"https://github.com/jgaskins/armature/blob/v0.4.3/src/template.cr#L302"},"def":{"name":"new","args":[{"name":"string","external_name":"string","restriction":""}],"visibility":"Public","body":"_ = allocate\n_.initialize(string)\nif _.responds_to?(:finalize)\n  ::GC.add_finalizer(_)\nend\n_\n"},"external_var":false}],"instance_methods":[{"html_id":"next_token:Token-instance-method","name":"next_token","abstract":false,"location":{"filename":"src/template.cr","line_number":309,"url":"https://github.com/jgaskins/armature/blob/v0.4.3/src/template.cr#L309"},"def":{"name":"next_token","return_type":"Token","visibility":"Public","body":"copy_location_info_to_token\n\ncase current_char\nwhen '\\0'\n  @token.type = :EOF\n  return @token\nwhen '<'\n  if peek_next_char == '%'\n    next_char\n    next_char\n\n    if current_char == '-'\n      @token.suppress_leading = true\n      next_char\n    else\n      if current_char == '|'\n        is_output_block = true\n        next_char\n      else\n        @token.suppress_leading = false\n      end\n    end\n\n    case current_char\n    when '='\n      next_char\n      copy_location_info_to_token\n      is_output = true\n    when '%'\n      next_char\n      copy_location_info_to_token\n      is_escape = true\n    else\n      copy_location_info_to_token\n    end\n    return consume_control(is_output, is_output_block, is_escape)\n  end\nelse\nend\nconsume_string\n"},"external_var":false}],"types":[{"html_id":"armature/Armature/Template/Lexer/Token","path":"Armature/Template/Lexer/Token.html","kind":"class","full_name":"Armature::Template::Lexer::Token","name":"Token","abstract":false,"superclass":{"html_id":"armature/Reference","kind":"class","full_name":"Reference","name":"Reference"},"ancestors":[{"html_id":"armature/Reference","kind":"class","full_name":"Reference","name":"Reference"},{"html_id":"armature/Object","kind":"class","full_name":"Object","name":"Object"}],"locations":[{"filename":"src/template.cr","line_number":275,"url":"https://github.com/jgaskins/armature/blob/v0.4.3/src/template.cr#L275"}],"repository_name":"armature","program":false,"enum":false,"alias":false,"const":false,"namespace":{"html_id":"armature/Armature/Template/Lexer","kind":"class","full_name":"Armature::Template::Lexer","name":"Lexer"},"constructors":[{"html_id":"new-class-method","name":"new","abstract":false,"location":{"filename":"src/template.cr","line_number":292,"url":"https://github.com/jgaskins/armature/blob/v0.4.3/src/template.cr#L292"},"def":{"name":"new","visibility":"Public","body":"_ = allocate\n_.initialize\nif _.responds_to?(:finalize)\n  ::GC.add_finalizer(_)\nend\n_\n"},"external_var":false}],"instance_methods":[{"html_id":"column_number:Int32-instance-method","name":"column_number","abstract":false,"location":{"filename":"src/template.cr","line_number":288,"url":"https://github.com/jgaskins/armature/blob/v0.4.3/src/template.cr#L288"},"def":{"name":"column_number","return_type":"Int32","visibility":"Public","body":"@column_number"},"external_var":false},{"html_id":"column_number=(column_number:Int32)-instance-method","name":"column_number=","abstract":false,"args":[{"name":"column_number","external_name":"column_number","restriction":"Int32"}],"args_string":"(column_number : Int32)","args_html":"(column_number : Int32)","location":{"filename":"src/template.cr","line_number":288,"url":"https://github.com/jgaskins/armature/blob/v0.4.3/src/template.cr#L288"},"def":{"name":"column_number=","args":[{"name":"column_number","external_name":"column_number","restriction":"Int32"}],"visibility":"Public","body":"@column_number = column_number"},"external_var":false},{"html_id":"line_number:Int32-instance-method","name":"line_number","abstract":false,"location":{"filename":"src/template.cr","line_number":287,"url":"https://github.com/jgaskins/armature/blob/v0.4.3/src/template.cr#L287"},"def":{"name":"line_number","return_type":"Int32","visibility":"Public","body":"@line_number"},"external_var":false},{"html_id":"line_number=(line_number:Int32)-instance-method","name":"line_number=","abstract":false,"args":[{"name":"line_number","external_name":"line_number","restriction":"Int32"}],"args_string":"(line_number : Int32)","args_html":"(line_number : Int32)","location":{"filename":"src/template.cr","line_number":287,"url":"https://github.com/jgaskins/armature/blob/v0.4.3/src/template.cr#L287"},"def":{"name":"line_number=","args":[{"name":"line_number","external_name":"line_number","restriction":"Int32"}],"visibility":"Public","body":"@line_number = line_number"},"external_var":false},{"html_id":"suppress_leading=(suppress_leading:Bool)-instance-method","name":"suppress_leading=","abstract":false,"args":[{"name":"suppress_leading","external_name":"suppress_leading","restriction":"Bool"}],"args_string":"(suppress_leading : Bool)","args_html":"(suppress_leading : Bool)","location":{"filename":"src/template.cr","line_number":289,"url":"https://github.com/jgaskins/armature/blob/v0.4.3/src/template.cr#L289"},"def":{"name":"suppress_leading=","args":[{"name":"suppress_leading","external_name":"suppress_leading","restriction":"Bool"}],"visibility":"Public","body":"@suppress_leading = suppress_leading"},"external_var":false},{"html_id":"suppress_leading?:Bool-instance-method","name":"suppress_leading?","abstract":false,"location":{"filename":"src/template.cr","line_number":289,"url":"https://github.com/jgaskins/armature/blob/v0.4.3/src/template.cr#L289"},"def":{"name":"suppress_leading?","return_type":"Bool","visibility":"Public","body":"@suppress_leading"},"external_var":false},{"html_id":"suppress_trailing=(suppress_trailing:Bool)-instance-method","name":"suppress_trailing=","abstract":false,"args":[{"name":"suppress_trailing","external_name":"suppress_trailing","restriction":"Bool"}],"args_string":"(suppress_trailing : Bool)","args_html":"(suppress_trailing : Bool)","location":{"filename":"src/template.cr","line_number":290,"url":"https://github.com/jgaskins/armature/blob/v0.4.3/src/template.cr#L290"},"def":{"name":"suppress_trailing=","args":[{"name":"suppress_trailing","external_name":"suppress_trailing","restriction":"Bool"}],"visibility":"Public","body":"@suppress_trailing = suppress_trailing"},"external_var":false},{"html_id":"suppress_trailing?:Bool-instance-method","name":"suppress_trailing?","abstract":false,"location":{"filename":"src/template.cr","line_number":290,"url":"https://github.com/jgaskins/armature/blob/v0.4.3/src/template.cr#L290"},"def":{"name":"suppress_trailing?","return_type":"Bool","visibility":"Public","body":"@suppress_trailing"},"external_var":false},{"html_id":"type:Type-instance-method","name":"type","abstract":false,"location":{"filename":"src/template.cr","line_number":285,"url":"https://github.com/jgaskins/armature/blob/v0.4.3/src/template.cr#L285"},"def":{"name":"type","return_type":"Type","visibility":"Public","body":"@type"},"external_var":false},{"html_id":"type=(type:Type)-instance-method","name":"type=","abstract":false,"args":[{"name":"type","external_name":"type","restriction":"Type"}],"args_string":"(type : Type)","args_html":"(type : <a href=\"../../../Armature/Template/Lexer/Token/Type.html\">Type</a>)","location":{"filename":"src/template.cr","line_number":285,"url":"https://github.com/jgaskins/armature/blob/v0.4.3/src/template.cr#L285"},"def":{"name":"type=","args":[{"name":"type","external_name":"type","restriction":"Type"}],"visibility":"Public","body":"@type = type"},"external_var":false},{"html_id":"value:String-instance-method","name":"value","abstract":false,"location":{"filename":"src/template.cr","line_number":286,"url":"https://github.com/jgaskins/armature/blob/v0.4.3/src/template.cr#L286"},"def":{"name":"value","return_type":"String","visibility":"Public","body":"@value"},"external_var":false},{"html_id":"value=(value:String)-instance-method","name":"value=","abstract":false,"args":[{"name":"value","external_name":"value","restriction":"String"}],"args_string":"(value : String)","args_html":"(value : String)","location":{"filename":"src/template.cr","line_number":286,"url":"https://github.com/jgaskins/armature/blob/v0.4.3/src/template.cr#L286"},"def":{"name":"value=","args":[{"name":"value","external_name":"value","restriction":"String"}],"visibility":"Public","body":"@value = value"},"external_var":false}],"types":[{"html_id":"armature/Armature/Template/Lexer/Token/Type","path":"Armature/Template/Lexer/Token/Type.html","kind":"enum","full_name":"Armature::Template::Lexer::Token::Type","name":"Type","abstract":false,"ancestors":[{"html_id":"armature/Enum","kind":"struct","full_name":"Enum","name":"Enum"},{"html_id":"armature/Comparable","kind":"module","full_name":"Comparable","name":"Comparable"},{"html_id":"armature/Value","kind":"struct","full_name":"Value","name":"Value"},{"html_id":"armature/Object","kind":"class","full_name":"Object","name":"Object"}],"locations":[{"filename":"src/template.cr","line_number":276,"url":"https://github.com/jgaskins/armature/blob/v0.4.3/src/template.cr#L276"}],"repository_name":"armature","program":false,"enum":true,"alias":false,"const":false,"constants":[{"id":"String","name":"String","value":"0"},{"id":"Output","name":"Output","value":"1"},{"id":"BeginOutputBlock","name":"BeginOutputBlock","value":"2"},{"id":"EndOutputBlock","name":"EndOutputBlock","value":"3"},{"id":"Control","name":"Control","value":"4"},{"id":"EOF","name":"EOF","value":"5"}],"namespace":{"html_id":"armature/Armature/Template/Lexer/Token","kind":"class","full_name":"Armature::Template::Lexer::Token","name":"Token"},"instance_methods":[{"html_id":"begin_output_block?-instance-method","name":"begin_output_block?","doc":"Returns `true` if this enum value equals `BeginOutputBlock`","summary":"<p>Returns <code>true</code> if this enum value equals <code><a href=\"../../../../Armature/Template/Lexer/Token/Type.html#BeginOutputBlock\">BeginOutputBlock</a></code></p>","abstract":false,"location":{"filename":"src/template.cr","line_number":279,"url":"https://github.com/jgaskins/armature/blob/v0.4.3/src/template.cr#L279"},"def":{"name":"begin_output_block?","visibility":"Public","body":"self == BeginOutputBlock"},"external_var":false},{"html_id":"control?-instance-method","name":"control?","doc":"Returns `true` if this enum value equals `Control`","summary":"<p>Returns <code>true</code> if this enum value equals <code><a href=\"../../../../Armature/Template/Lexer/Token/Type.html#Control\">Control</a></code></p>","abstract":false,"location":{"filename":"src/template.cr","line_number":281,"url":"https://github.com/jgaskins/armature/blob/v0.4.3/src/template.cr#L281"},"def":{"name":"control?","visibility":"Public","body":"self == Control"},"external_var":false},{"html_id":"end_output_block?-instance-method","name":"end_output_block?","doc":"Returns `true` if this enum value equals `EndOutputBlock`","summary":"<p>Returns <code>true</code> if this enum value equals <code><a href=\"../../../../Armature/Template/Lexer/Token/Type.html#EndOutputBlock\">EndOutputBlock</a></code></p>","abstract":false,"location":{"filename":"src/template.cr","line_number":280,"url":"https://github.com/jgaskins/armature/blob/v0.4.3/src/template.cr#L280"},"def":{"name":"end_output_block?","visibility":"Public","body":"self == EndOutputBlock"},"external_var":false},{"html_id":"eof?-instance-method","name":"eof?","doc":"Returns `true` if this enum value equals `EOF`","summary":"<p>Returns <code>true</code> if this enum value equals <code><a href=\"../../../../Armature/Template/Lexer/Token/Type.html#EOF\">EOF</a></code></p>","abstract":false,"location":{"filename":"src/template.cr","line_number":282,"url":"https://github.com/jgaskins/armature/blob/v0.4.3/src/template.cr#L282"},"def":{"name":"eof?","visibility":"Public","body":"self == EOF"},"external_var":false},{"html_id":"output?-instance-method","name":"output?","doc":"Returns `true` if this enum value equals `Output`","summary":"<p>Returns <code>true</code> if this enum value equals <code><a href=\"../../../../Armature/Template/Lexer/Token/Type.html#Output\">Output</a></code></p>","abstract":false,"location":{"filename":"src/template.cr","line_number":278,"url":"https://github.com/jgaskins/armature/blob/v0.4.3/src/template.cr#L278"},"def":{"name":"output?","visibility":"Public","body":"self == Output"},"external_var":false},{"html_id":"string?-instance-method","name":"string?","doc":"Returns `true` if this enum value equals `String`","summary":"<p>Returns <code>true</code> if this enum value equals <code><a href=\"../../../../Armature/Template/Lexer/Token/Type.html#String\">String</a></code></p>","abstract":false,"location":{"filename":"src/template.cr","line_number":277,"url":"https://github.com/jgaskins/armature/blob/v0.4.3/src/template.cr#L277"},"def":{"name":"string?","visibility":"Public","body":"self == String"},"external_var":false}]}]}]}]}]},{"html_id":"armature/HTTP","path":"HTTP.html","kind":"module","full_name":"HTTP","name":"HTTP","abstract":false,"locations":[{"filename":"src/session.cr","line_number":51,"url":"https://github.com/jgaskins/armature/blob/v0.4.3/src/session.cr#L51"}],"repository_name":"armature","program":false,"enum":false,"alias":false,"const":false,"doc":"The HTTP module contains `HTTP::Client`, `HTTP::Server` and `HTTP::WebSocket` implementations.\n\nNOTE: To use `HTTP`, you must explicitly import it with `require \"http\"`","summary":"<p>The HTTP module contains <code>HTTP::Client</code>, <code>HTTP::Server</code> and <code>HTTP::WebSocket</code> implementations.</p>"}]}}